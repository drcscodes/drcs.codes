<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Dr. CS codes Function Design</title><meta name=viewport content="width=device-width"><link rel=stylesheet href=https://DrCS.codes/css/syntax.css><link rel=stylesheet href=https://DrCS.codes/css/main.css><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link href=https://DrCS.codes/css/navbar-top-fixed.css rel=stylesheet></head><body><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark"><a class=navbar-brand href=/programming-python>Function Design</a>
<button type=button class=navbar-toggler data-toggle=collapse data-target=#navbarCollapse aria-controls=navbarCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="navbar-collapse collapse" id=navbarCollapse><ul class="navbar-nav mr-auto"></ul><ul class="navbar-nav pull-right"><li class="nav-item pull-right"><a class=nav-link href=https://DrCS.codes>Dr. CS codes</a></li></ul></div></nav><main role=main class=container><h2 id=function-design-recipe>Function Design Recipe</h2><ol><li><p>Examples</p><ul><li>What a few representative calls to the function look like in the Python REPL.<ul><li>Think from the function <em>user&rsquo;s</em> perspective.</li><li>Examples become doctests in the function&rsquo;s docstring.</li></ul></li></ul></li><li><p>Header</p><ul><li>Parameter names and types</li><li>Return type</li></ul></li><li><p>Description</p><ul><li>Short paragraph (1 or 2 sentences) describing the function&rsquo;s behavior.</li></ul></li><li><p>Body</p><ul><li>Implement the algorithm (sequence of statements) that accomplishes the function&rsquo;s task, deriving the function&rsquo;s output (return value) and/or effect from the the function&rsquo;s inputs (arguments).</li></ul></li><li><p>Test</p><ul><li>Test your function on some representative inputs (try to include edge cases).</li></ul></li></ol><h2 id=writing-function-examples>Writing Function Examples</h2><p>Let&rsquo;s apply this design recipe in the creation of a simple function to calculate the length of the hypotenuse from the lengths of the two legs (the sides that join in a right angle).</p><p>First, decide the name of the function.</p><ul><li><p>Descriptive word(s)</p><ul><li>Verbs may imply an imperative function called for its effect, not a return value<ul><li><code>print("hello")</code>, <code>exit()</code></li></ul></li><li>Nouns may imply a pure function, a return value derived only from the function&rsquo;s arguments with no side effects<ul><li><code>type(1)</code>, <code>double(2)</code></li></ul></li></ul></li><li><p>Avoid Python keywords or names of library functions.</p><ul><li><p>Tip:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#f92672>import</span> keyword
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> keyword<span style=color:#f92672>.</span>kwlist <span style=color:#75715e># lists all the Python keywords</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> keyword<span style=color:#f92672>.</span>iskeyword(<span style=color:#e6db74>&#34;foo&#34;</span>) <span style=color:#75715e># True if &#34;foo&#34; is a keyword</span>
</span></span></code></pre></div></li></ul></li><li><p>Follow Python&rsquo;s <a href=https://www.python.org/dev/peps/pep-0008/>naming conventions</a>.</p></li></ul><h2 id=hypotenuse-function-examples>Hypotenuse Function Examples</h2><p>We&rsquo;ll name our function <code>hypotenuse</code>. General naming tips:</p><ul><li>Only abbreviate if abbreviation is well-known or obvious<ul><li>If you must, form a new abbreviation by eliminating vowels starting from the right, e.g., <code>format</code> $\rightarrow$ <code>formt</code> $\rightarrow$ <code>fmt</code></li></ul></li><li>Some abbreviations are idiomatic, e.g., <code>i</code> as an loop variable used as an <code>int</code> index</li><li>Length of the name should be inversely proportional to its scope<ul><li>Local variables can be short</li><li>Modules, functions, and classes should have more descriptive names</li></ul></li></ul><p>Our examples:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> hypotenuse(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> hypotenuse(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>12</span>)
</span></span><span style=display:flex><span><span style=color:#ae81ff>13</span>
</span></span></code></pre></div><h2 id=function-headers>Function Headers</h2><p>The function header includes the function&rsquo;s name and parameter names. We add a <em>type contract</em>, which we document using Python&rsquo;s new (as of 3.5) <a href=https://docs.python.org/3/library/typing.html>type hints</a> feature. Here are a few basic types. A full explanation is in <a href=https://www.python.org/dev/peps/pep-0484>PEP 484</a>, including a complete list of <a href=https://www.python.org/dev/peps/pep-0484/#the-typing-module>types in the <code>typing</code> module</a></p><p>:::::::::::::: {.columns}
::: {.column width=&ldquo;40%&rdquo;}</p><ul><li><code>int</code></li><li><code>float</code></li><li><code>str</code>
:::
::: {.column width=&ldquo;60%&rdquo;}</li><li><code>List[int]</code></li><li><code>Tuple[float]</code></li><li><code>Dict[str, int]</code>
:::
::::::::::::::</li></ul><h2 id=hypotenuse-function-header>Hypotenuse Function Header</h2><p>Deciding on the type contract of <code>hypotenuse</code>:</p><ul><li>The sides of a triangle are measured with numbers. What kind of numbers, <code>int</code>s, <code>floats</code>?</li><li>The return value is also a number. Is the return type the same type as the parameters?</li></ul><p>Since integer values can be represented as <code>float</code>s, we settle on the this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>hypotenuse</span>(a: float, b: float) <span style=color:#f92672>-&gt;</span> float:
</span></span></code></pre></div><p>The type contract says: if you pass two values of type <code>float</code> in your call to <code>hypotenuse</code>, the function will return a value of type <code>float</code>.</p><h2 id=hypotenuse-function-description>Hypotenuse Function Description</h2><p>The function description states what the functions does. We place this description in the function&rsquo;s <a href=https://www.python.org/dev/peps/pep-0257/>docstring</a>. Any string that occurs as the first item in the definition of a module, function, class, or method is a docstring. By convention we use triple double quotes for docstrings.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>hypotenuse</span>(a: float, b: float) <span style=color:#f92672>-&gt;</span> float:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Take the lengths of the two legs, a and b, of a right triangle
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    and return the length of the hypotenuse.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span></code></pre></div><p>This incomplete but legal version of the function returns <code>None</code> because it doesn&rsquo;t have a return statement.</p><ul><li>Tip: We can <em>stub</em> the function with a return statement that returns a dummy value, like 0.0, so code that uses our function will work but produce incorrect results. That way we can get the &ldquo;plumbing&rdquo; of our program working before filling in the details of the functions.</li></ul><h2 id=designing-a-function-body>Designing a Function Body</h2><p>The function body implements an algorithm that produces the functions output (or effect) based on the function&rsquo;s inputs. The algorithm for calculating a hypotenuse is:</p><ol><li>Square leg <code>a</code></li><li>Square leg <code>b</code></li><li>Sum the squares</li><li>Take the square root of the sum of the squares.</li></ol><p>The last step produces the final result.</p><p>Later in the course will learn how to design algorithms. FOr now we can think of algorithm design intuitively.</p><p>The next slide shows the algorithm above translated to Python code.</p><h2 id=hypotenuse-function-body>Hypotenuse Function Body</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#f92672>import</span> math
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>hypotenuse</span>(a: float, b: float) <span style=color:#f92672>-&gt;</span> float:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Take the lengths of the two legs, a and b, of a right triangle
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    and return the length of the hypotenuse.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    a2 <span style=color:#f92672>=</span> a <span style=color:#f92672>*</span> a
</span></span><span style=display:flex><span>    b2 <span style=color:#f92672>=</span> b <span style=color:#f92672>*</span> b
</span></span><span style=display:flex><span>    sum_squares <span style=color:#f92672>=</span> a2 <span style=color:#f92672>+</span> b2
</span></span><span style=display:flex><span>    result <span style=color:#f92672>=</span> math<span style=color:#f92672>.</span>sqrt(sum_squares)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> result
</span></span></code></pre></div><p>Of course this function can be shortened, but this version shows every detail.</p><h2 id=testing-the-hypotenuse-function>Testing the Hypotenuse Function</h2><p>We can test our function manually in the REPL or by adding example functions calls to a script. We should also add the examples we created in step 1 of the function design recipe to the docstring.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#f92672>import</span> math
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>hypotenuse</span>(a: float, b: float) <span style=color:#f92672>-&gt;</span> float:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Take the lengths of the two legs, a and b, of a right triangle
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    and return the length of the hypotenuse.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &gt;&gt;&gt; hypotenuse(3, 4)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    5
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &gt;&gt;&gt; hypotenuse(5, 12)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    13
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    a2 <span style=color:#f92672>=</span> a <span style=color:#f92672>*</span> a
</span></span><span style=display:flex><span>    b2 <span style=color:#f92672>=</span> b <span style=color:#f92672>*</span> b
</span></span><span style=display:flex><span>    sum_squares <span style=color:#f92672>=</span> a2 <span style=color:#f92672>+</span> b2
</span></span><span style=display:flex><span>    result <span style=color:#f92672>=</span> math<span style=color:#f92672>.</span>sqrt(sum_squares)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> result
</span></span></code></pre></div><p>If we do this then we get automated testing for free with <a href=https://docs.python.org/3/library/doctest.html>doctest</a>.</p></main><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js integrity=sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script>
<script src=../js/bootstrap.min.js></script></body></html>