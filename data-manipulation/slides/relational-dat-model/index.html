<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Dr. CS codes Relational Data Model</title><meta name=viewport content="width=device-width"><link rel=stylesheet href=https://DrCS.codes/css/syntax.css><link rel=stylesheet href=https://DrCS.codes/css/main.css><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link href=https://DrCS.codes/css/navbar-top-fixed.css rel=stylesheet></head><body><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark"><a class=navbar-brand href=/data-manipulation>Relational Data Model</a>
<button type=button class=navbar-toggler data-toggle=collapse data-target=#navbarCollapse aria-controls=navbarCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="navbar-collapse collapse" id=navbarCollapse><ul class="navbar-nav mr-auto"></ul><ul class="navbar-nav pull-right"><li class="nav-item pull-right"><a class=nav-link href=https://DrCS.codes>Dr. CS codes</a></li></ul></div></nav><main role=main class=container><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>Relational Data Model</h2><div id=outline-text-headline-1 class=outline-text-2><div id=outline-container-headline-2 class=outline-3><h3 id=headline-2>Relational Data Model</h3><div id=outline-text-headline-2 class=outline-text-3><p>A <strong>relation schema</strong> $R(A_a, ..., A_n)$ is a relation name $R$ and a list of attributes $A_1, ..., A_n$.</p><p>Each attribute $A_i$ is the name of a role played by some domain $D$.</p><ul><li><p>Example: $AUTHOR(author\_id, first\_name, last\_name)$</p><ul><li>$dom(A_1)$ (or $dom(author\_id)$) is integer</li></ul></li></ul><p>A <strong>database schema</strong> is a collection of relation schemas.</p><ul><li>Example: $PUBS$ database has relation schemas $BOOK$, $AUTHOR$, and $PUB$ (for publication, not public house)</li></ul></div></div><div id=outline-container-headline-3 class=outline-3><h3 id=headline-3>Relations and Databases</h3><div id=outline-text-headline-3 class=outline-text-3><p>A <strong>relation</strong>, or <strong>relation state</strong>, $r(R)$ is a <strong><strong>set</strong></strong> of tuples that conform to a <strong>relation schema</strong> $R$.</p><ul><li>Example: $r(AUTHOR)$ =</li></ul><p><del>———–</del>————<del>———–</del></p><table><tbody><tr><td>author_id</td><td>first_name</td><td>last_name</td></tr></tbody></table><p><del>———–</del>————<del>———–</del></p><table><tbody><tr><td class=align-right>1</td><td>John</td><td>McCarthy</td></tr><tr><td class=align-right>4</td><td>Claude</td><td>Shannon</td></tr><tr><td class=align-right>5</td><td>Alan</td><td>Turing</td></tr><tr><td class=align-right>6</td><td>Alonzo</td><td>Church</td></tr></tbody></table><p><del>———–</del>————<del>———–</del></p><p>A <strong>database</strong> is a set of relations.</p></div></div><div id=outline-container-headline-4 class=outline-3><h3 id=headline-4>Tuples</h3><div id=outline-text-headline-4 class=outline-text-3><p>A <strong>tuple</strong> is an <strong><strong>ordered list</strong></strong> of values.</p><ul><li>Example: $t_1 =$ &lt;1, 'John', 'McCarthy'></li></ul><p>Each value in the tuple is that tuple's value for the corresponding attribute of the relation schema.</p><p>Example: (these are equivalent notations):</p><ul><li>$t_1[first\_name] =$ 'John' (bracket notation)</li><li>$t_1.first\_name =$ 'John' (object notation)</li><li>$t_1[2] =$ `'John'` (positional notation)</li></ul><p>The <strong>degree</strong> or <strong>arity</strong> of a relation schema is the number of attributes it has.</p><ul><li>Example: $AUTHOR$ has degree 3.</li></ul></div></div><div id=outline-container-headline-5 class=outline-3><h3 id=headline-5>An Example Relation</h3><div id=outline-text-headline-5 class=outline-text-3><div class=center-block style=text-align:center;margin-left:auto;margin-right:auto><p><img src=student-relation.png alt=student-relation.png title=student-relation.png></p></div></div></div><div id=outline-container-headline-6 class=outline-3><h3 id=headline-6>Attributes and Domains</h3><div id=outline-text-headline-6 class=outline-text-3><p>Each attribute has a name and a <strong>domain</strong></p><ul><li><p>The name describes the role played by the attribute</p><ul><li>Example: the $first\_name$ attribute of the $AUTHOR$ schema plays the role of the first name of an author represented by a tuple in a $r(AUTHOR)$ relation.</li></ul></li><li>The domain is a set of atomic values that a tuple may have for that attribute.</li><li><p>A <strong>logical definition</strong> of a domain specifies a simple type such as integer or string, and a <strong>data type</strong> or <strong>format</strong></p><ul><li>Example: <code>USA_phone_number</code> as $(ddd) ddd-dddd$, where $d$ is a digit</li></ul></li></ul></div></div><div id=outline-container-headline-7 class=outline-3><h3 id=headline-7>Mathematical Definition of Relation</h3><div id=outline-text-headline-7 class=outline-text-3><p>Given $R(A_1, ..., A_n)$,</p><ul><li>$r(R) \subseteq (dom(A_1) \times dom(A_2) \times ... \times dom(A_n))$</li></ul><p>The total number of values, or <strong>cardinality</strong>, of a domain $D$ is $|D|$.</p><p>So the maximum number of tuples that could possibly be in $r(R)$ is</p><ul><li>$|dom(A_1)| * |dom(A_2)| * ... * |dom(A_n)|$</li></ul></div></div><div id=outline-container-headline-8 class=outline-3><h3 id=headline-8>Properties of Relations</h3><div id=outline-text-headline-8 class=outline-text-3><ul><li><p>Atomicity of values, i.e., the First Normal Form assumption</p><ul><li>Attribute values in tuples are indivisible, e.g., no compound or multivalued attributes as in EER models</li></ul></li><li><p>Nulls</p><ul><li>Unknown, not applicable, not existing</li></ul></li><li><p>Closed world assumption</p><ul><li>Facts not asserted explicitly are assumed to be false</li></ul></li></ul></div></div><div id=outline-container-headline-9 class=outline-3><h3 id=headline-9>Kinds of Constraints</h3><div id=outline-text-headline-9 class=outline-text-3><ul><li><p>Inherent model-based (or <strong>implicit</strong>) constraints</p><ul><li>domain constraints, atomic attribute values</li></ul></li><li><p>Schema-based (or <strong>explicit</strong>) contstraints</p><ul><li>keys, referential integrity</li></ul></li><li>Application-based (or semantic constraints), a.k.a., business rules</li></ul></div></div><div id=outline-container-headline-10 class=outline-3><h3 id=headline-10>Superkeys</h3><div id=outline-text-headline-10 class=outline-text-3><p>A <strong>superkey</strong> $SK$ is a set of attributes of a relation schema $R$ such that</p><div class=center-block style=text-align:center;margin-left:auto;margin-right:auto><p>$t_i[SK] \ne t_j[SK]$</p></div><p>for any $i \ne j$.</p><p>In other words, the values of the superkey attributes of a tuple uniquely identify the tuple within the relation.</p><p>By the definition of the relational model, the full attribute set of a relation schema is a <strong>default superkey</strong>.</p></div></div><div id=outline-container-headline-11 class=outline-3><h3 id=headline-11>Keys</h3><div id=outline-text-headline-11 class=outline-text-3><p>A <strong>minimal superkey</strong> is a superkey for which removing an attribute would make it no longer a superkey.</p><p>We call a minimal superkey a <strong>key</strong>.</p><p>A relation schema may have several keys. We call these <strong>candidate keys</strong> and choose one arbitrarily to be the <strong>primary key</strong>.</p><p>We underline the primary key in a relation schema.</p><ul><li>Example: $AUTHOR(\underline{author\_id}, first\_name, last\_name)$</li></ul></div></div><div id=outline-container-headline-12 class=outline-3><h3 id=headline-12>Database Integrity Constraints</h3><div id=outline-text-headline-12 class=outline-text-3><ul><li>Domain constraints - Attribute values in tuples must be in domain for that attribute</li><li>Key constraints - No two tuples can have the same values for the primary key</li><li>Entity Integrity Constraints - No tuple can have a NULL value for its primary key attribute</li><li>Referential Integrity Constraints - Tuples in one relation referencing tuples in another relation</li><li>Semantic Integrity Constraints - Constraints on values of attributes that cannot be specified in the databases DDL</li></ul></div></div><div id=outline-container-headline-13 class=outline-3><h3 id=headline-13>Referential Integrity Constraints</h3><div id=outline-text-headline-13 class=outline-text-3><p>A foreign key value from a tuple in one relation must refer to nothing, or to the primary key for an existing tuple in another relation. Formally:</p><p>Given relation schemas $R_1$ and $R_2$, a set of attributes $FK$ in $R_1$ is a foreign key referencing $R_2$ if</p><ul><li>the attributes in $FK$ in $R_1$ have same domains as $PK$ in $R_2$</li><li>Given some $t_1$ in $r_1(R_1)$ and $t_2$ in $r_2(R_2)$, either $t_1[FK]$ = $t_2[PK]$ or $t_1[FK]$ is NULL.</li></ul><p>$R_1$ is the referencing relation, $R_2$ is the referenced relation.</p></div></div><div id=outline-container-headline-14 class=outline-3><h3 id=headline-14>Diagramming FK Relationships</h3><div id=outline-text-headline-14 class=outline-text-3><div class=center-block style=text-align:center;margin-left:auto;margin-right:auto><p><img src=company-foreign-keys.png alt=company-foreign-keys.png title=company-foreign-keys.png></p></div></div></div><div id=outline-container-headline-15 class=outline-3><h3 id=headline-15>Semantic Integrity Constraints</h3><div id=outline-text-headline-15 class=outline-text-3><ul><li>Can't be specified in DDL</li><li>Can be checked with triggers and assertions</li><li>Usually checked in application code</li></ul><p>Example: salary of an employee cannot exceed the salary of the employee's supervisor.</p></div></div><div id=outline-container-headline-16 class=outline-3><h3 id=headline-16>Constraint Violations on Insert</h3><div id=outline-text-headline-16 class=outline-text-3><ul><li><p>Domain constraints</p><ul><li>Insert a tuple with an attribute value not in attribute's domain</li></ul></li><li><p>Key constraints</p><ul><li>Insert a tuple with a key that's already in the relation state</li></ul></li><li><p>Entity integrity constraints</p><ul><li>Insert a tuple with a NULL value for any part of the primary key</li></ul></li><li><p>Referential integrity constraints</p><ul><li>Insert a tuple in a referring relation whose FK does not appear as a PK value in any tuple of the referenced relation</li></ul></li></ul></div></div><div id=outline-container-headline-17 class=outline-3><h3 id=headline-17>Constraint Violations on Update</h3><div id=outline-text-headline-17 class=outline-text-3><ul><li><p>Domain constraints</p><ul><li>Update a tuple with an attribute value not in attribute's domain</li></ul></li><li><p>Key constraints</p><ul><li>Update a tuple with a key value that already appears in another tuple in the relation</li></ul></li><li><p>Entity integrity constraints</p><ul><li>Update a tuple with a NULL value for any part of the primary key</li></ul></li><li><p>Referential integrity constraints</p><ul><li>Update a tuple in a refferring relation with a FK does not appear as a PK value in any tuple of the referenced relation</li><li>Update the primary key for a tuple in a referenced relation for which there are tuples in referring relationships. The tuples in referring relationships would be orphaned or end up referring to the wrong parent tuple.</li></ul></li></ul></div></div><div id=outline-container-headline-18 class=outline-3><h3 id=headline-18>Constraint Violations on Delete</h3><div id=outline-text-headline-18 class=outline-text-3><ul><li><p>Referential integrity</p><ul><li>Delete a tuple in a referenced relationship for which there are tuples in referring relationships. The tuples in referring relationships would be orphaned.</li></ul></li></ul></div></div><div id=outline-container-headline-19 class=outline-3><h3 id=headline-19>Domain Integrity Violation Examples</h3><div id=outline-text-headline-19 class=outline-text-3><p><del>———–</del>————<del>———–</del></p><table><tbody><tr><td>author_id</td><td>first_name</td><td>last_name</td></tr></tbody></table><p><del>———–</del>————<del>———–</del></p><table><tbody><tr><td class=align-right>1</td><td>John</td><td>McCarthy</td></tr><tr><td class=align-right>4</td><td>Claude</td><td>Shannon</td></tr><tr><td class=align-right>5</td><td>Alan</td><td>Turing</td></tr><tr><td class=align-right>6</td><td>Alonzo</td><td>Church</td></tr></tbody></table><p><del>———–</del>————<del>———–</del></p><p>$dom(author_id) = integer, dom(first_name) = string, dom(last_name) = string$</p><ul><li>Insert $&lt;"Two", "Jenny", "McCarthy">$ – $"Two"$ is not in $dom(author_id)$</li><li>Update $&lt;1, "John", "McCarthy">$ to $&lt;1, "John", 1>$– $1$ is not in $dom(last_name)$</li></ul></div></div><div id=outline-container-headline-20 class=outline-3><h3 id=headline-20>Key Integrity Violation Examples</h3><div id=outline-text-headline-20 class=outline-text-3><p><del>————-</del>————<del>———–</del></p><table><tbody><tr><td><span style=text-decoration:underline>author_id</span></td><td>first_name</td><td>last_name</td></tr></tbody></table><p><del>————-</del>————<del>———–</del></p><table><tbody><tr><td class=align-right>1</td><td>John</td><td>McCarthy</td></tr><tr><td class=align-right>4</td><td>Claude</td><td>Shannon</td></tr><tr><td class=align-right>5</td><td>Alan</td><td>Turing</td></tr><tr><td class=align-right>6</td><td>Alonzo</td><td>Church</td></tr></tbody></table><p><del>————-</del>————<del>———–</del></p><ul><li>Insert $&lt;1, "Jenny", "McCarthy">$ – $1$ is an existing primary key</li><li>Update $&lt;1, "John", "McCarthy">$ to $&lt;6, "John", "McCarthy">$– $6$ is an existing primary key</li></ul></div></div><div id=outline-container-headline-21 class=outline-3><h3 id=headline-21>Entity Integrity Violation Examples</h3><div id=outline-text-headline-21 class=outline-text-3><p><del>————-</del>————<del>———–</del></p><table><tbody><tr><td><span style=text-decoration:underline>author_id</span></td><td>first_name</td><td>last_name</td></tr></tbody></table><p><del>————-</del>————<del>———–</del></p><table><tbody><tr><td class=align-right>1</td><td>John</td><td>McCarthy</td></tr><tr><td class=align-right>4</td><td>Claude</td><td>Shannon</td></tr><tr><td class=align-right>5</td><td>Alan</td><td>Turing</td></tr><tr><td class=align-right>6</td><td>Alonzo</td><td>Church</td></tr></tbody></table><p><del>————-</del>————<del>———–</del></p><ul><li>Insert $&lt;NULL, "Jenny", "McCarthy">$ – $NULL$ not allowed for primary key</li><li>Update $&lt;NULL, "John", "McCarthy">$ to $&lt;1, "John", 1>$– $NULL$ not allowed for primary key</li></ul></div></div><div id=outline-container-headline-22 class=outline-3><h3 id=headline-22>Referential Integrity Violations – Employee - Department Example</h3><div id=outline-text-headline-22 class=outline-text-3><div class=center-block style=text-align:center;margin-left:auto;margin-right:auto><p><img src=employee-department.png alt=employee-department.png title=employee-department.png></p></div></div></div></div></div></main><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js integrity=sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script>
<script src=../js/bootstrap.min.js></script></body></html>