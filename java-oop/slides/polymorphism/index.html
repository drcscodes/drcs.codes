<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Dr. CS codes Polymorphism</title><meta name=viewport content="width=device-width"><link rel=stylesheet href=https://DrCS.codes/css/syntax.css><link rel=stylesheet href=https://DrCS.codes/css/main.css><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link href=https://DrCS.codes/css/navbar-top-fixed.css rel=stylesheet></head><body><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark"><a class=navbar-brand href=/java-oop>Polymorphism</a>
<button type=button class=navbar-toggler data-toggle=collapse data-target=#navbarCollapse aria-controls=navbarCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="navbar-collapse collapse" id=navbarCollapse><ul class="navbar-nav mr-auto"></ul><ul class="navbar-nav pull-right"><li class="nav-item pull-right"><a class=nav-link href=https://DrCS.codes>Dr. CS codes</a></li></ul></div></nav><main role=main class=container><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>Polymorphism</h2><div id=outline-text-headline-1 class=outline-text-2><div id=outline-container-headline-2 class=outline-3><h3 id=headline-2>Introduction to Object-Oriented Programming</h3><div id=outline-text-headline-2 class=outline-text-3><p>Today we'll learn how to combine all the elements of object-oriented programming in the design of a program that handles a company payroll. Object-oriented programming requires three features:</p><ul><li>Data abstraction with classes (encapsulation)</li><li>Inheritance</li><li>Dynamic method binding</li></ul><p>That last part, dynamic method binding, provides for subtype <strong>polymorphism</strong>, which we'll learn today.</p></div></div><div id=outline-container-headline-3 class=outline-3><h3 id=headline-3>Class Hierarchies</h3><div id=outline-text-headline-3 class=outline-text-3><p>UML class hierarchies depict the superclass-subclass relationships between families of related classes.</p><div class=center-block style=text-align:center;margin-left:auto;margin-right:auto><p><a href=employee-class-hierarchy.pdf>employee-class-hierarchy.pdf</a></p></div><ul><li><code>Employee</code> is the superclass of <code>HourlyEmployee</code> and <code>SalariedEmployee</code></li><li><code>Employee</code> is more general than <code>HourlyEmployee</code> and <code>SalariedEmployee</code>, e.g., there at least as many <code>Employee</code> s as either <code>HourlyEmployee</code> s or <code>SalariedEmployee</code> s</li><li><code>HourlyEmployee</code> and <code>SalariedEmployee</code> are richer than <code>Employee</code> becuse they extend <code>Employee</code> with additional features</li></ul></div></div><div id=outline-container-headline-4 class=outline-3><h3 id=headline-4>A <code>SalariedEmployee</code> Class</h3><div id=outline-text-headline-4 class=outline-text-3><p>Let's add <code>SalariedEmployee</code> to our class hierarchy.</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SalariedEmployee3</span> <span style=color:#66d9ef>extends</span> Employee3 <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> MONTHS_PER_YEAR <span style=color:#f92672>=</span> 12<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>double</span> annualSalary<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>SalariedEmployee3</span><span style=color:#f92672>(</span>String aName<span style=color:#f92672>,</span> Date aHireDate<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                            <span style=color:#66d9ef>double</span> anAnnualSalary<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>aName<span style=color:#f92672>,</span> aHireDate<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        Disallowzeroesandnegatives<span style=color:#f92672>(</span>anAnnualSalary<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        annualSalary <span style=color:#f92672>=</span> anAnnualSalary<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>getAnnualSalary</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> annualSalary<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>monthlyPay</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> annualSalary <span style=color:#f92672>/</span> MONTHS_PER_YEAR<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span></span></span></code></pre></div></div></div></div><div id=outline-container-headline-5 class=outline-3><h3 id=headline-5>Our <code>Employee</code> Class Hierarchy</h3><div id=outline-text-headline-5 class=outline-text-3><p>We now have all the classes in our hierarchy:</p><div class=center-block style=text-align:center;margin-left:auto;margin-right:auto><p><a href=employee-class-hierarchy.pdf>employee-class-hierarchy.pdf</a></p></div><p>But our classes aren't well factored.</p><ul><li><a href=../code/employee/SalariedEmployee3.java>SalariedEmployee3</a> and <a href=../code/employee/HourlyEmployee3.java>HourlyEmployee3</a> have duplicate copies of <code>disallowZeroesAndNegatives</code></li><li><a href=../code/employee/SalariedEmployee3.java>SalariedEmployee3</a> and <a href=../code/employee/HourlyEmployee3.java>HourlyEmployee3</a> both have <code>monthlyPay</code> methods, but these methods are not polymorphic because they're not defined in <a href=../code/employee/Employee3.java>Employee3</a></li></ul><p>Let's refactor our <code>Employee</code> class hierarchy to give it a clean object-oriented design.</p></div></div><div id=outline-container-headline-6 class=outline-3><h3 id=headline-6>A Company Spec</h3><div id=outline-text-headline-6 class=outline-text-3><p>Before we make <code>monthlyPay</code> polymorphic, we need an application to demonstrate why doing so is useful. Let's design a <code>Company</code> class with the following specs:</p><ul><li>A <a href=../code/employee/Company4.java>Company4</a> has exactly 9 employees (because we haven't learned about dynamically resized data structures yet)</li><li>A company calculates its monthly payroll by adding up the monthly pay of each of its employees.</li><li>A company can have any mix of hourly and salaried employees</li></ul><p>That last bullet motivates the use of polymorphism.</p></div></div><div id=outline-container-headline-7 class=outline-3><h3 id=headline-7>Maintaining an Employee List</h3><div id=outline-text-headline-7 class=outline-text-3><p>With our current class hierarchy, we need to maintain separate (partial) arrays of hourly and salaried employees. Because they're partial arrays we also need to keep track of how many of each type of employee we have.</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Company</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> HourlyEmployee<span style=color:#f92672>[]</span> hourlyEmployees<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> numHourlyEmployees <span style=color:#f92672>=</span> 10<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> SalariedEmployee<span style=color:#f92672>[]</span> salariedEmployees<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> numSalariedEmployees <span style=color:#f92672>=</span> 10<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Company</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        hourlyEmployees <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HourlyEmployee<span style=color:#f92672>[</span>numHourlyEmployees<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>        salariedEmployees <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SalariedEmployee<span style=color:#f92672>[</span>numSalariedEmployees<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div></div></div><div id=outline-container-headline-8 class=outline-3><h3 id=headline-8>Calculating Payroll the Hard Way</h3><div id=outline-text-headline-8 class=outline-text-3><p>With our employee lists, calculating payroll is accomplished with two loops:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Company</span> <span style=color:#f92672>{</span> <span style=color:#75715e>// hypothetical
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>monthlyPayroll</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> payroll <span style=color:#f92672>=</span> 0<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> numHourlyEmployees<span style=color:#f92672>;</span> <span style=color:#f92672>++</span>i<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            payroll <span style=color:#f92672>+=</span> hourlyEmployees<span style=color:#f92672>[</span>i<span style=color:#f92672>].</span><span style=color:#a6e22e>monthlyPay</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> numSalariedEmployees<span style=color:#f92672>;</span> <span style=color:#f92672>++</span>i<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            payroll <span style=color:#f92672>+=</span> salariedEmployees<span style=color:#f92672>[</span>i<span style=color:#f92672>].</span><span style=color:#a6e22e>monthlyPay</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> payroll<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ..
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>Seems reasonable. But …</p><ul><li>What if we want to add a third type of employee?</li></ul></div></div><div id=outline-container-headline-9 class=outline-3><h3 id=headline-9>Calculating Payroll the Easy Way</h3><div id=outline-text-headline-9 class=outline-text-3><p>We'd like to be able to calculate payroll with a single loop over all employees:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Company4</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>monthlyPayroll</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> payroll <span style=color:#f92672>=</span> 0<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Employee employee<span style=color:#f92672>:</span> employees<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            payroll <span style=color:#f92672>+=</span> employee<span style=color:#f92672>.</span><span style=color:#a6e22e>monthlyPay</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> payroll<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ..
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>Much cleaner and less error-prone (e.g., we don't have the book-keeping of two partial arrays). To be able to code like this we need to update the design of our <code>Employee</code> class hierarchy.</p></div></div><div id=outline-container-headline-10 class=outline-3><h3 id=headline-10>A More General Employee List</h3><div id=outline-text-headline-10 class=outline-text-3><p>The first step is to store one array of <code>Employee</code> s:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Company4</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Employee4<span style=color:#f92672>[]</span> employees<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Company4</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        employees <span style=color:#f92672>=</span> <span style=color:#f92672>...;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>monthlyPayroll</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> payroll <span style=color:#f92672>=</span> 0<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> employees<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span> <span style=color:#f92672>++</span>i<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            payroll <span style=color:#f92672>+=</span> employees<span style=color:#f92672>[</span>i<span style=color:#f92672>].</span><span style=color:#a6e22e>monthlyPay</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> payroll<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>Much better. But it doesn't compile. Why?</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>$ javac Company<span style=color:#f92672>.</span><span style=color:#a6e22e>java</span>
</span></span><span style=display:flex><span>Company<span style=color:#f92672>.</span><span style=color:#a6e22e>java</span><span style=color:#f92672>:</span>15<span style=color:#f92672>:</span> cannot find symbol
</span></span><span style=display:flex><span>symbol  <span style=color:#f92672>:</span> method <span style=color:#a6e22e>monthlyPay</span><span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>location: <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Employee</span>
</span></span><span style=display:flex><span>            payroll <span style=color:#f92672>+=</span> employees<span style=color:#f92672>[</span>i<span style=color:#f92672>].</span><span style=color:#a6e22e>monthlyPay</span><span style=color:#f92672>();</span></span></span></code></pre></div></div></div></div><div id=outline-container-headline-11 class=outline-3><h3 id=headline-11>Abstract Classes</h3><div id=outline-text-headline-11 class=outline-text-3><p>We need <code>Employee</code> to declare a <code>monthlyPay</code> method for subclasses to define. Since we don't have a general definition for <code>monthlyPay</code> suitable for <code>Employee</code>, <code>Employee</code> will need to be abstract.</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Employee4</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>monthlyPay</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>An abstract class</p><ul><li>cannot be instantiated,</li><li>may contain zero or more abstract methods, and</li><li>subclasses must either provide an implementation for abstract methods, or be declared <code>abstract</code> themselves.</li></ul><p>This makes sense for our <code>Employee4</code> class. We don't ever want to instantiate <code>Employee4</code> objects. <code>Employee4</code> simply defines the common aspects of all employees, with subclasses filling in the details.</p></div></div><div id=outline-container-headline-12 class=outline-3><h3 id=headline-12>The <code>Employee4</code> Class Hierarchy</h3><div id=outline-text-headline-12 class=outline-text-3><div class=center-block style=text-align:center;margin-left:auto;margin-right:auto><p><img src=employee-uml.png alt=employee-uml.png title=employee-uml.png></p></div><ul><li><code>Employee4</code> and its <code>monthlyPay</code> method are abstract.</li><li><code>monthlyPay</code> is polymorphic because it is overriden in subclasses.</li></ul></div></div><div id=outline-container-headline-13 class=outline-3><h3 id=headline-13>Polymorphic Methods</h3><div id=outline-text-headline-13 class=outline-text-3><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Company4</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Employee4<span style=color:#f92672>[]</span> employees<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>monthlyPayroll</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> payroll <span style=color:#f92672>=</span> 0<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Employee4 employee<span style=color:#f92672>:</span> employees<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            payroll <span style=color:#f92672>+=</span> employees<span style=color:#f92672>.</span><span style=color:#a6e22e>monthlyPay</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> payroll<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><ul><li>The static type of the elements of <code>employees</code> is <code>Employee4</code></li><li>The dynamic type can be any subclass of <code>Employee4</code>, in this case they are all <code>SalariedEmployee4</code> and <code>HourlyEmployee4</code></li><li>When a method is invoked on an object, the method of the dynamic (run-time) type is used, no matter what the static (compile-time) type is.</li><li>So though the static types of <code>employees</code> elements is <code>Employee</code>, the <code>monthlyPay</code> methods invoked on them are the ones defined in <code>SalariedEmployee4</code> and <code>HourlyEmployee4</code>.</li></ul></div></div><div id=outline-container-headline-14 class=outline-3><h3 id=headline-14>Refactoring Duplicate Code in a Class Hierarchy</h3><div id=outline-text-headline-14 class=outline-text-3><p>Recall the definition of <code>disallowZeroesAndNegatives</code>:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>disallowZeroesAndNegatives</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span> <span style=color:#f92672>...</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>boolean</span> shouldThrowException <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    String nonPositives <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>double</span> arg<span style=color:#f92672>:</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>arg <span style=color:#f92672>&lt;=</span> 0<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            shouldThrowException <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            nonPositives <span style=color:#f92672>+=</span> arg <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>shouldThrowException<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String msg <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Following arguments were &lt;= 0: &#34;</span> <span style=color:#f92672>+</span> nonPositives<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> IllegalArgumentException<span style=color:#f92672>(</span>msg<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><ul><li>This method is duplicated in <code>HourlyEmployee4</code> and <code>SalariedEmployee4</code></li><li>Let's move the definition of <code>disallowZeroesAndNegatives</code> into <code>Employee5</code> so it will be shared (rather than duplicated) in <code>SalariedEmployee5</code> and <code>HourlyEmployee5</code>.</li></ul></div></div><div id=outline-container-headline-15 class=outline-3><h3 id=headline-15><code>protected</code> Members</h3><div id=outline-text-headline-15 class=outline-text-3><p><code>private</code> members of a superclass are effectively invisible to subclasses. To make a member accessible to subclasses, use <code>protected</code>:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Employee5</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>disallowZeroesAndNegatives</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span> <span style=color:#f92672>...</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p><code>protected</code> members</p><ul><li>are accessible to subclasses and other classes in the same package, and</li><li>can be overriden in subclasses.</li></ul><p><code>protected</code> members provide encapsulation within a class hierarchy and package, <code>private</code> provides encapsulation within a single class.</p><p>Later we'll see a better way to re-use.</p></div></div><div id=outline-container-headline-16 class=outline-3><h3 id=headline-16>Implementation Inheritance Hinders Re-use</h3><div id=outline-text-headline-16 class=outline-text-3><p>Recall the <code>disallowZeroesAndNegatives</code> method that we refactored so that it's in the <code>Employee</code> class and inherited by subclasses:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Employee6</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>disallowZeroesAndNegatives</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span> <span style=color:#f92672>...</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><ul><li>There's nothing about this method that is specific to ~Employee~s</li><li><code>disallowZeroesAndNegatives</code> could be useful in other classes that are not part of the <code>Employee</code> class hierarchy.</li><li>Since it's <code>protected</code>, it can't be used outside of the <code>Employee</code> class hierarchy or package.</li></ul><p>In software engineering terms, we say that the code in <code>Employee</code> lacks <strong>cohesion</strong> - it has parts that aren't part of the <strong>Employee</strong> concept. Such a design hinders reuse.</p></div></div><div id=outline-container-headline-17 class=outline-3><h3 id=headline-17>Favor Composition over Inheritance</h3><div id=outline-text-headline-17 class=outline-text-3><p>If we move these protected methods into a separate class, like <a href=ValidationUtils.java>../code/employee/ValidationUtils.java</a></p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ValidationUtils</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>disallowNullArguments</span><span style=color:#f92672>(</span>Object <span style=color:#f92672>...</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#f92672>...</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>disallowZeroesAndNegatives</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span> <span style=color:#f92672>...</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#f92672>...</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>we can use them anywhere, e.g.,</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Employee</span><span style=color:#f92672>(</span>String aName<span style=color:#f92672>,</span> Date aHireDate<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ValidationUtils<span style=color:#f92672>.</span><span style=color:#a6e22e>disallowNullArguments</span><span style=color:#f92672>(</span>aName<span style=color:#f92672>,</span> aHireDate<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        name <span style=color:#f92672>=</span> aName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        hireDate <span style=color:#f92672>=</span> aHireDate<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span></span></span></code></pre></div></div><p>With this refactoring, we have our final versions of <a href=../code/employee/Employee.java>Employee.java</a>,
<a href=../code/employee/HourlyEmployee.java>HourlyEmployee.java</a>, and
<a href=../code/employee/SalariedEmployee.java>SalariedEmployee.java</a></p></div></div><div id=outline-container-headline-18 class=outline-3><h3 id=headline-18>Closing Thoughts on Polymorphism</h3><div id=outline-text-headline-18 class=outline-text-3><p>We've now seen two kinds of polymorphism:</p><ul><li>Ad-hoc polymorphism (method overloading), and</li><li>Subtype polymorphism (overriding methods in subtypes).</li></ul><p><strong>Subtype polymorphism</strong> is core feature of OOP. Polymorphism makes it possible to reuse <strong>concepts</strong> in a way that makes programs extensible without requiring rewriting existing code - this is the <strong>open-closed principle</strong>.</p><p>In the next block we'll see one more kind of polymorphism: type parameter polymorphism, or <strong>parametric polymorphism</strong>.</p></div></div><div id=outline-container-headline-19 class=outline-3><h3 id=headline-19>Object-oriented Design</h3><div id=outline-text-headline-19 class=outline-text-3><p>With encapsulation, inheritance, and polymorphism we have all the language features we need to employ three important object-oriented design principles:</p><ul><li><p><strong>S</strong> ingle responsiblity principle: a module should only contain code related to the definition of the module</p><ul><li><code>Employee</code> classes contain only employee-related code, validation code is in utility class</li></ul></li><li><p><strong>O</strong> pen-closed principle: open for extension, closed for modification</p><ul><li>Can add new <code>Employee</code> subclasses without changing other classes in the <code>Employee</code> hierarchy or classes that use <code>Employee~s, such as ~Company</code></li></ul></li><li><p><strong>L</strong> liskov substitution principle: instances of subtypes should be substitutable wherever instances of supertypes are expected</p><ul><li>A square is not a rectangle in an OO sense, but both are 2-D shapes</li></ul></li></ul><p>In CS 2340 you'll learn several more OO design principles and several patterns that employ them.</p></div></div></div></div></main><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js integrity=sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script>
<script src=../js/bootstrap.min.js></script></body></html>