<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Dr. CS codes The Object Superclass</title><meta name=viewport content="width=device-width"><link rel=stylesheet href=https://DrCS.codes/css/syntax.css><link rel=stylesheet href=https://DrCS.codes/css/main.css><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link href=https://DrCS.codes/css/navbar-top-fixed.css rel=stylesheet></head><body><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark"><a class=navbar-brand href=/java-oop>The Object Superclass</a>
<button type=button class=navbar-toggler data-toggle=collapse data-target=#navbarCollapse aria-controls=navbarCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="navbar-collapse collapse" id=navbarCollapse><ul class="navbar-nav mr-auto"></ul><ul class="navbar-nav pull-right"><li class="nav-item pull-right"><a class=nav-link href=https://DrCS.codes>Dr. CS codes</a></li></ul></div></nav><main role=main class=container><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>The Object Superclass</h2><div id=outline-text-headline-1 class=outline-text-2><div id=outline-container-headline-2 class=outline-3><h3 id=headline-2>Fitting Classes Into the Java Hierarchy</h3><div id=outline-text-headline-2 class=outline-text-3><p><code>java.lang.Object</code> defines several methods that are designed to be overriden in subclasses (<a href=http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.3.2>JLS ยง 4.3.2</a>:)</p><ul><li>The method <code>equals(Object)</code> defines a notion of object equality, which is based on value, not reference, comparison.</li><li>The method <code>hashCode</code> is very used together with <code>equals(Object)</code> in hashtables such as <code>java.util.Hashmap</code>.</li><li>The method <code>toString</code> returns a <code>String</code> representation of the object.</li><li>The method <code>clone</code> is used to make a duplicate of an object (don't touch).</li><li>The method <code>finalize</code> is run just before an object is destroyed (don't touch).</li></ul><p>A class hierarchy is also sometimes called a <strong>framework</strong>.</p></div></div><div id=outline-container-headline-3 class=outline-3><h3 id=headline-3>When to Override the <code>equals(Object)</code> Method</h3><div id=outline-text-headline-3 class=outline-text-3><p>The default implementation of <code>equals(Object)</code> in <code>java.lang.Object</code> is object identity - each object <code>equals(Object)</code> only itself.</p><p>When should a class override <code>equals(Object)</code>?</p><ul><li>When logical equality differs from object identity, as is the case for <strong>value</strong> classes like <code>Date</code></li><li>When classes don't implement instance control, e.g., enum values.</li><li>When a suitable <code>equals(Object)</code> method is not provided by a superclass.</li></ul><p>More important than recognizing <strong>when</strong> to override <code>equals(Object)</code> is knowing <strong>how</strong> to override <code>equals(Object)</code>.</p></div></div><div id=outline-container-headline-4 class=outline-3><h3 id=headline-4>How to Override the <code>equals(Object)</code> Method</h3><div id=outline-text-headline-4 class=outline-text-3><p>Obey the general contract of <code>equals(Object)</code> (\href{}{JLS }), which says that <code>equals(Object)</code> defines an equivalence relation. So, for non-null references, <code>equals(Object)</code> is</p><ul><li>reflexive - any object <code>equals(Object)</code> itself</li><li>symmetric - if <code>a.equals(Object)(b)</code> is true then <code>b.equals(a)</code> must be true</li><li>transitive - if <code>a.equals(b)</code> and <code>b.equals(c)</code> are true then <code>a.equals(c)</code> must be true</li><li>consistent - if <code>a</code> and <code>b</code> do not change between invocations of <code>a.equals(b)</code> or <code>b.equals(a)</code> then each invocation must return the same result</li><li><code>a.equals(null)</code> must always return <code>false</code>.</li></ul></div></div><div id=outline-container-headline-5 class=outline-3><h3 id=headline-5>A Recipe for Implementing <code>equals(Object)</code></h3><div id=outline-text-headline-5 class=outline-text-3><p>Obeying the general contract of <code>equals(Object)</code> is easier if you follow this recipe <sup class=footnote-reference><a id=footnote-reference-1 href=#footnote-1>1</a></sup>.\\</p><ol><li>Check for reference equality with == (are we comparing to self?).</li><li>Check that the other object is an <code>instanceof</code> this object's class.</li><li>Cast the other object to this's type (guaranteed to work after instanceof test)</li><li>Check that each ``significant'' field in the other object <code>equals(Object)</code> the corresponding field in this object.</li></ol><p>After seeing an example applicaiton of this recipe we'll motivate the proper implementation of <code>equals(Object)</code> methods by introducing our first collection class, <code>ArrayList</code>.</p></div></div><div id=outline-container-headline-6 class=outline-3><h3 id=headline-6>An Example <code>equals(Object)</code> Method</h3><div id=outline-text-headline-6 class=outline-text-3><p>Assume we have a <code>Person</code> class with a single <code>name</code> field.</p><ol><li>Check for reference equality with == (are we comparing to self?).</li><li>Check that the other object is an <code>instanceof</code> this object's class.</li><li>Cast the other object to this's type (guaranteed to work after instanceof test)</li><li>Check that each ``significant'' field in the other object <code>equals(Object)</code> the corresponding field in this object.</li></ol><p>Applying the recipe:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>      <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>Object other<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>1:        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>this</span> <span style=color:#f92672>==</span> other<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>2:        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!(</span>other <span style=color:#66d9ef>instanceof</span> Person<span style=color:#f92672>))</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>3:        Person that <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>Person<span style=color:#f92672>)</span> other<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>4:        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>that<span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>}</span></span></span></code></pre></div></div></div></div><div id=outline-container-headline-7 class=outline-3><h3 id=headline-7>Arrays and <code>ArrayList</code></h3><div id=outline-text-headline-7 class=outline-text-3><ul><li>Arrays are fixed-size collections of any data types, including primitives</li><li>ArrayLists are dynamically-allocated (i.e., automatically resized) collections of reference types (not primitives - but we'll talk about autoboxing).</li><li>ArrayLists use arrays internally, but this isn't important to know for basic use.</li></ul></div></div><div id=outline-container-headline-8 class=outline-3><h3 id=headline-8><code>ArrayList</code> Basics</h3><div id=outline-text-headline-8 class=outline-text-3><p>Create an <code>ArrayList</code> with operator <code>new</code>:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>  ArrayList tasks <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>();</span></span></span></code></pre></div></div><p>Add items with <code>add()</code>:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>  tasks<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Eat&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  tasks<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Sleep&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  tasks<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Code&#34;</span><span style=color:#f92672>);</span></span></span></code></pre></div></div><p>Traverse with for-each loop:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>  <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Object task<span style=color:#f92672>:</span> tasks<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>task<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span></span></span></code></pre></div></div><p>Note that the for-each loop implicitly uses an iterator.</p></div></div><div id=outline-container-headline-9 class=outline-3><h3 id=headline-9>The <code>equals(Object)</code> Method and Collections</h3><div id=outline-text-headline-9 class=outline-text-3><ul><li>A class whose instances will be stored in a collection must have a properly implemented <code>equals(Object)</code> method.</li><li>The <code>contains</code> method in collections uses the <code>equals(Object)</code> method in the stored objects.</li><li>The default implementation of <code>equals(Object)</code> (object identity - true only for same object in memory) only rarely gives correct results.</li><li>Note that <code>hashcode()</code> also has a default implementation that uses the object's memory address. As a rule, whenever you override <code>equals(Object)</code>, you should also override <code>hashcode~\footnote{~hashcode()</code> is used in hash-based collections, which we'll learn in a few weeks.}.</li></ul></div></div><div id=outline-container-headline-10 class=outline-3><h3 id=headline-10><code>equals(Object)</code> Method Examples</h3><div id=outline-text-headline-10 class=outline-text-3><p>In this simple class hierarchy, <code>FoundPerson</code> has a properly implemented <code>equals(Object)</code> method and <code>LostPerson</code> does not. See <a href=../code/collections/ArrayListEqualsDemo.java>ArrayListEqualsDemo.java</a>.</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Person</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> String name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Person</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LostPerson</span> <span style=color:#66d9ef>extends</span> Person <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>LostPerson</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>name<span style=color:#f92672>);</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FoundPerson</span> <span style=color:#66d9ef>extends</span> Person <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>FoundPerson</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>name<span style=color:#f92672>);</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>Object other<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>this</span> <span style=color:#f92672>==</span> other<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!(</span>other <span style=color:#66d9ef>instanceof</span> Person<span style=color:#f92672>))</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#f92672>((</span>Person<span style=color:#f92672>)</span> other<span style=color:#f92672>).</span><span style=color:#a6e22e>name</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span></span></span></code></pre></div></div></div></div><div id=outline-container-headline-11 class=outline-3><h3 id=headline-11>Override-Equivalence</h3><div id=outline-text-headline-11 class=outline-text-3><p>Two methods are <a href=http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.4.2>override-equivalent</a> if:</p><ul><li>they have the same name,</li><li>they have the same parameter lists, and</li><li>their return values are <a href=http://docs.oracle.com/javase/tutorial/java/javaOO/returnvalue.html>covariant</a></li></ul><p>These rules lead to a few pitfalls:</p><ul><li>You can't define override-equivalent methods in the same class.</li><li>In subclasses it's easy to accidentally overload a superclass method when you meant to override.</li></ul><p>Let's look at a few examples to help us understand these rules.</p></div></div><div id=outline-container-headline-12 class=outline-3><h3 id=headline-12>Covariant Returns</h3><div id=outline-text-headline-12 class=outline-text-3><p><code>covariantReturn</code> is covariant in <code>Person</code> and <code>LostPerson</code>:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Person</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> String name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Person</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name<span style=color:#f92672>;</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> Object <span style=color:#a6e22e>covariantReturn</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>();</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LostPerson</span> <span style=color:#66d9ef>extends</span> Person <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>LostPerson</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>name<span style=color:#f92672>);</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Override</span> <span style=color:#66d9ef>public</span> LostPerson <span style=color:#a6e22e>covariantReturn</span><span style=color:#f92672>(){</span><span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>;}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>โฆ because <code>LostPerson</code> is a subtype of <code>Object</code>.</p><p>But <code>SubLostPerson</code> won't compile:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SubLostPerson</span> <span style=color:#66d9ef>extends</span> LostPerson <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>SubLostPerson</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>name<span style=color:#f92672>);</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Override</span> <span style=color:#66d9ef>public</span> Person <span style=color:#a6e22e>covariantReturn</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span><span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>;}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>โฆ because its <code>covariantReturn</code>'s return type, <code>Person</code>, is a supertype of <code>LostPerson</code>.</p></div></div><div id=outline-container-headline-13 class=outline-3><h3 id=headline-13>Non-Covariant Return</h3><div id=outline-text-headline-13 class=outline-text-3><p><code>NoncompilingPerson</code> won't compile because <code>int</code> is not a subtype of <code>boolean</code> and because return-type covariance only applies to reference types, not primitives.</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NonCompilingPerson</span> <span style=color:#66d9ef>extends</span> Person <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>NonCompilingPerson</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>name<span style=color:#f92672>);</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * This method won&#39;t compile because int is not a subtype of boolean.
</span></span></span><span style=display:flex><span><span style=color:#75715e>         */</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>Object other<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>this</span> <span style=color:#f92672>==</span> other<span style=color:#f92672>)</span> <span style=color:#66d9ef>return</span> 1<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!(</span>other <span style=color:#66d9ef>instanceof</span> Person<span style=color:#f92672>))</span> <span style=color:#66d9ef>return</span> 0<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#f92672>((</span>Person<span style=color:#f92672>)</span> other<span style=color:#f92672>).</span><span style=color:#a6e22e>name</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>)</span> <span style=color:#f92672>?</span> 1 <span style=color:#f92672>:</span> 0<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span></span></span></code></pre></div></div></div></div><div id=outline-container-headline-14 class=outline-3><h3 id=headline-14>Accidental Overloading</h3><div id=outline-text-headline-14 class=outline-text-3><p>It's easy to make this mistake:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>OverloadedPerson</span> <span style=color:#66d9ef>extends</span> Person <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>OverloadedPerson</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>name<span style=color:#f92672>);</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>OverloadedPerson other<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>this</span> <span style=color:#f92672>==</span> other<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!(</span>other <span style=color:#66d9ef>instanceof</span> OverloadedPerson<span style=color:#f92672>))</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#f92672>((</span>OverloadedPerson<span style=color:#f92672>)</span> other<span style=color:#f92672>).</span><span style=color:#a6e22e>name</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span></span></span></code></pre></div></div><ul><li>Signature of <code>equals</code> in <code>Object</code> is <code>public boolean equals(Object other)</code> - parameter type is <code>Object</code>.</li><li>In <code>OverloadedPerson</code> we've accidentally <strong>overloaded</strong> <code>equals</code> instead of <strong>overriding</strong> <code>equals</code> by making the parameter type <code>OverloadedPerson</code>.</li></ul><p>Using the <code>@Override</code> annotation helps you avoid this mistake.</p></div></div><div id=outline-container-headline-15 class=outline-3><h3 id=headline-15>Equals Methods in Subclasses of Instantiable Classes</h3><div id=outline-text-headline-15 class=outline-text-3><p>Take a look at</p><ul><li><a href=../code/hipster/Person.java>Person.java</a></li><li><a href=../code/hipster/Hipster.java>Hipster.java</a></li><li><a href=../code/hipster/CoffeeShop.java>CoffeeShop.java</a></li></ul><p>Both <a href=../code/hipster/Person.java>Person.java</a> and <a href=../code/hipster/Hipster.java>Hipster.java</a> have properly implemented <code>equals</code> methods, but as the <a href=../code/hipster/CoffeeShop.java>CoffeeShop.java</a> code shows they don't properly implement an equivalence relation. The problem is that <a href=../code/hipster/Hipster.java>Hipster.java</a> is a subclass of an instantiable class. How would you fix the design of your Person-Hipster class hierarchy?</p></div></div><div id=outline-container-headline-16 class=outline-3><h3 id=headline-16>Closing Thoughts</h3><div id=outline-text-headline-16 class=outline-text-3><ul><li><code>java.lang.Object</code> is the root superclass of every Java class.</li><li>"Classic" Java collections are general because they hold elements of type <code>Object</code></li><li>Java collections and many programming idioms rely on the methods defined in <code>Object</code>, some of which must be overridden in subclasses in order for instances of these subclasses to function properly as elements of collections.</li><li>Overriding <code>equals</code> is straightforward if you follow the recipe.</li><li>There's more to overriding <code>equals</code> โ in particular, overriding <code>hashcode</code> โ but now we know the basic concepts.</li></ul></div></div></div></div><div class=footnotes><hr class=footnotes-separatator><div class=footnote-definitions><div class=footnote-definition><sup id=footnote-1><a href=#footnote-reference-1>1</a></sup><div class=footnote-body><p><a href=http://www.informit.com/store/effective-java-9780134685991>http://www.informit.com/store/effective-java-9780134685991</a></p></div></div></div></div></main><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js integrity=sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script>
<script src=../js/bootstrap.min.js></script></body></html>