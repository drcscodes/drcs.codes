<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Dr. CS codes Inheritance</title><meta name=viewport content="width=device-width"><link rel=stylesheet href=https://DrCS.codes/css/syntax.css><link rel=stylesheet href=https://DrCS.codes/css/main.css><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link href=https://DrCS.codes/css/navbar-top-fixed.css rel=stylesheet></head><body><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark"><a class=navbar-brand href=/java-oop>Inheritance</a>
<button type=button class=navbar-toggler data-toggle=collapse data-target=#navbarCollapse aria-controls=navbarCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="navbar-collapse collapse" id=navbarCollapse><ul class="navbar-nav mr-auto"></ul><ul class="navbar-nav pull-right"><li class="nav-item pull-right"><a class=nav-link href=https://DrCS.codes>Dr. CS codes</a></li></ul></div></nav><main role=main class=container><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>Inheritance</h2><div id=outline-text-headline-1 class=outline-text-2><div id=outline-container-headline-2 class=outline-3><h3 id=headline-2>Programming in the large</h3><div id=outline-text-headline-2 class=outline-text-3><p>Software is complex. Three ways we deal with complexity:</p><ul><li>Abstraction - boiling a concept down to its essential elements, ignoring irrelevant details</li><li>Decomposition - decompose system into packages, classes, functions</li><li>Reuse - reuse library function in many diferent places</li></ul><p>Today we introduce another kind of resuse: inheritance</p></div></div><div id=outline-container-headline-3 class=outline-3><h3 id=headline-3>What is inheritance?</h3><div id=outline-text-headline-3 class=outline-text-3><p><img src=money_Inheritance.jpg alt=money_Inheritance.jpg title=money_Inheritance.jpg></p></div></div><div id=outline-container-headline-4 class=outline-3><h3 id=headline-4>What is inheritance?</h3><div id=outline-text-headline-4 class=outline-text-3><p>More like genetics …</p><p><img src=puppy-inheritance.jpg alt=puppy-inheritance.jpg title=puppy-inheritance.jpg></p><p>… but a programming concept that, like so much in CS, borrows a term from another field to leverage our intuition.</p></div></div><div id=outline-container-headline-5 class=outline-3><h3 id=headline-5>Inheritance</h3><div id=outline-text-headline-5 class=outline-text-3><p>Inheritance: deriving one class from another class.</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Employee</span> <span style=color:#f92672>{</span> <span style=color:#f92672>...</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HourlyEmployee</span> <span style=color:#66d9ef>extends</span> Employee <span style=color:#f92672>{</span> <span style=color:#f92672>...</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SalariedEmployee</span> <span style=color:#66d9ef>extends</span> Employee <span style=color:#f92672>{</span> <span style=color:#f92672>...</span> <span style=color:#f92672>}</span></span></span></code></pre></div></div><ul><li><code>Employee</code> is the <strong>base class</strong> or <strong>superclass</strong></li><li><code>HourlyEmployee</code> and <code>SalariedEmployee</code> are <strong>derived classes</strong> or <strong>subclasses</strong></li><li>Subclasses <strong>inherit</strong> the interface and implementation of their superclass(es)</li><li><code>extends</code> is the Java syntax for inheriting from another class</li></ul><p>Important idea to plant in your head now: subclassing is about concept reuse not merely implementation reuse. For example, <code>HourlyEmployee</code> <strong>is-a</strong> <code>Employee</code> conceptually.</p></div></div><div id=outline-container-headline-6 class=outline-3><h3 id=headline-6>Superclasses</h3><div id=outline-text-headline-6 class=outline-text-3><p>Consider the superclass <a href=../code/employee/Employee1.java>Employee1</a>:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Employee1</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Date hireDate<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Employee1</span><span style=color:#f92672>(</span>String aName<span style=color:#f92672>,</span> Date aHireDate<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        disallowNullArguments<span style=color:#f92672>(</span>aName<span style=color:#f92672>,</span> aHireDate<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        name <span style=color:#f92672>=</span> aName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        hireDate <span style=color:#f92672>=</span> aHireDate<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Date <span style=color:#a6e22e>getHireDate</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> hireDate<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span> <span style=color:#75715e>// and toString(), etc. ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p><code>Employee</code> defines the basic information needed to define any employee.</p></div></div><div id=outline-container-headline-7 class=outline-3><h3 id=headline-7>Subclasses</h3><div id=outline-text-headline-7 class=outline-text-3><p>The <code>extends</code> clause names the direct superclass of the current class (<a href=http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.4)>JLS § 8.1.4</a>).</p><p>Here is a subclass of <code>Employee1</code>, <a href=../code/employee/HourlyEmployee1.java>HourlyEmployee1</a>:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HourlyEmployee</span> <span style=color:#66d9ef>extends</span> Employee <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>HourlyEmployee</span><span style=color:#f92672>(</span>String aName<span style=color:#f92672>,</span> Date aHireDate<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>aName<span style=color:#f92672>,</span> aHireDate<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><ul><li><code>HourlyEmployee</code> inherits all the members of <code>Employee</code></li><li><code>HourlyEmployee</code> can't access private members of <code>Employee</code> directly</li><li>The <code>super</code> call in the constructor calls <code>Employee</code>'s constructor to initialize <code>HourlyEmployee</code> instances</li></ul><p>The <code>HourlyEmployee</code> concept extends the <code>Employee</code> concept.</p></div></div><div id=outline-container-headline-8 class=outline-3><h3 id=headline-8><code>super</code> Subtleties</h3><div id=outline-text-headline-8 class=outline-text-3><ul><li>If present, an explicit <code>super</code> call must be the first statement in a constructor.</li><li>If an explicit <code>super</code> call is not present and the superclass has a no-arg constructor, <code>super()</code> will implicitly be the first statement in any constructor</li><li>If there is no no-arg constructor in a superclass (for example, if the superclass defines other constructors without explicitly defining a no-arg constructor), then subclass constructors must explicitly include a <code>super</code> call.</li></ul><p>Together, these rules create a constructor chain from the highest superclass of a class to the class itself.</p></div></div><div id=outline-container-headline-9 class=outline-3><h3 id=headline-9>Subclass Constructors</h3><div id=outline-text-headline-9 class=outline-text-3><p>Recall our definitions of <code>Employee1</code> and <code>HourlyEmployee1</code>.</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Employee1</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// The only constructor in Employee
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Employee1</span><span style=color:#f92672>(</span>String aName<span style=color:#f92672>,</span> Date aHireDate<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        name <span style=color:#f92672>=</span> aName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        hireDate <span style=color:#f92672>=</span> aHireDate<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span></span></span></code></pre></div></div><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HourlyEmployee1</span> <span style=color:#66d9ef>extends</span> Employee1 <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>HourlyEmployee1</span><span style=color:#f92672>(</span>String aName<span style=color:#f92672>,</span> Date aHireDate<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>aName<span style=color:#f92672>,</span> aHireDate<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>Would <code>HourlyEmployee1.java</code> compile if we left off the constructor definition?</p></div></div><div id=outline-container-headline-10 class=outline-3><h3 id=headline-10>Inherited Members</h3><div id=outline-text-headline-10 class=outline-text-3><p>Given our previous definitions of <code>Employee1</code> and <code>HourlyEmployee1</code>, we can write code like this (from <a href=../code/employee/EmployeeDemo1.java>EmployeeDemo1</a>):</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>DateFormat df <span style=color:#f92672>=</span> DateFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>getDateInstance</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>HourlyEmployee eva <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> HourlyEmployee<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Eva L. Uator&#34;</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                       df<span style=color:#f92672>.</span><span style=color:#a6e22e>parse</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;February 18, 2013&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>eva<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; was hired on &#34;</span>
</span></span><span style=display:flex><span>                   <span style=color:#f92672>+</span> eva<span style=color:#f92672>.</span><span style=color:#a6e22e>getHireDate</span><span style=color:#f92672>());</span></span></span></code></pre></div></div><p>Note that</p><ul><li>we didn't have to define <code>getName</code> and <code>getHireDate</code> in <code>HourlyEmployee</code></li><li>our current implementation of <code>HourlyEmployee</code> doesn't add anything to <code>Employee</code></li></ul></div></div><div id=outline-container-headline-11 class=outline-3><h3 id=headline-11>Subclasses Specialize Superclasses</h3><div id=outline-text-headline-11 class=outline-text-3><p>We define subclasses to <strong>extend</strong> or <strong>specialize</strong> the functionality of their superclasses. Let's add suitable extensions to <code>HourlyEmployee</code>:\footnote{Employee2 is the same as Employee1, but we'll keep the numbers consistent to avoid confusion.}</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HourlyEmployee2</span> <span style=color:#66d9ef>extends</span> Employee2 <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>double</span> hourlyWage<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>double</span> monthlyHours<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>HourlyEmployee</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>,</span> Date hireDate<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                          <span style=color:#66d9ef>double</span> wage<span style=color:#f92672>,</span> <span style=color:#66d9ef>double</span> hours<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>name<span style=color:#f92672>,</span> hireDate<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        hourlyWage <span style=color:#f92672>=</span> wage<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        monthlyHours <span style=color:#f92672>=</span> hours<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>getHourlyWage</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> hourlyWage<span style=color:#f92672>;}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>getMonthlyHours</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> monthlyHours<span style=color:#f92672>;}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>getMonthlyPay</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> hourlyWage <span style=color:#f92672>*</span> monthlyHours<span style=color:#f92672>;</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>Food for thought: what is the monthly pay rule for ~HourlyEmployee~s? What if an employee works more than 40 hours per week?</p></div></div><div id=outline-container-headline-12 class=outline-3><h3 id=headline-12>Access Modifiers</h3><div id=outline-text-headline-12 class=outline-text-3>\begin{center}
\begin{tabular}{|l|c|c|c|c|} \hline
Modifier & Class & Package & Subclass & World\\
\hline
public & Y & Y & Y & Y\\
protected & Y & Y & Y & N\\
no modifier & Y & Y & N & N\\
private & Y & N & N & N\\
\hline
\end{tabular}
\end{center}<ul><li>Every class has an access level (for now all of our classes are <code>public</code>).</li><li>Every member has an access level.</li><li>The defulat access level, no mofifier, is also called "package private."</li></ul></div></div><div id=outline-container-headline-13 class=outline-3><h3 id=headline-13>Access Restrictions Extend to Subclasses</h3><div id=outline-text-headline-13 class=outline-text-3><p><code>private</code> members of superclasses are present in subclasses, but can't be directly accessed. So this won't compile:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HourlyEmployee2</span> <span style=color:#66d9ef>extends</span> Employee2 <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> name <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;; Hire Date: &#34;</span> <span style=color:#f92672>+</span> hireDate <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;; Hourly Wage: &#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>+</span> hourlyWage <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;; Monthly Hours: &#34;</span> <span style=color:#f92672>+</span> monthlyHours<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>because <code>name</code> and <code>hireDate</code> are private in <code>Employee2</code>. But their getter methods are public:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HourlyEmployee3</span> <span style=color:#66d9ef>extends</span> Employee3 <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> getName<span style=color:#f92672>()+</span><span style=color:#e6db74>&#34;, Hire Date: &#34;</span><span style=color:#f92672>+</span>getHireDate<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>           <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;, Wage: &#34;</span><span style=color:#f92672>+</span> hourlyWage
</span></span><span style=display:flex><span>           <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;, Hours: &#34;</span> <span style=color:#f92672>+</span> monthlyHours<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div></div></div><div id=outline-container-headline-14 class=outline-3><h3 id=headline-14>Overriding Methods</h3><div id=outline-text-headline-14 class=outline-text-3><p>Overriding a method means providing a new definition of a superclass method in a subclass. We've been doing this all along with <code>toString</code> and <code>equals</code>, which are defined in <code>java.lang.Object</code>, the highest superclass of all Java classes.</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Object</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> getClass<span style=color:#f92672>().</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;@&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>toHexString</span><span style=color:#f92672>(</span>hashCode<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>Object obj<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>this</span> <span style=color:#f92672>==</span> obj<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>We redefine these on our classes because</p><ul><li>the default implementation of <code>toString</code> just prints the class name and hash code (which is the memory address by default).</li><li>the default implementation of <code>equals</code> just compares object references, i.e., identity equality. What we want from <code>equals</code> is value equality.</li></ul></div></div><div id=outline-container-headline-15 class=outline-3><h3 id=headline-15><code>@Override</code> Annotation</h3><div id=outline-text-headline-15 class=outline-text-3><p>The optional <code>@Override</code> <a href=http://docs.oracle.com/javase/tutorial/java/annotations/index.html>annotation</a> informs the compiler that the element is meant to override an element declared in a superclass.</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Employee2</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> name <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;; Hire Date: &#34;</span> <span style=color:#f92672>+</span> hireDate<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>Now if our subclass's <code>toString()</code> method doesn't actually override <code>java.lang.Object</code>'s (or some other intermediate superclass's) <code>toString()</code>, the compiler will tell us.</p></div></div><div id=outline-container-headline-16 class=outline-3><h3 id=headline-16>Explicit Constructor Invocation with <code>this</code></h3><div id=outline-text-headline-16 class=outline-text-3><p>What if we wanted to have default values for hourly wages and monthly hours? We can provide an alternate constructor that delegates to our main constructor with <code>this</code> <a href=../code/employee/HourlyEmployee3.java>HourlyEmployee3.java</a>:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HourlyEmployee3</span> <span style=color:#66d9ef>extends</span> Employee3 <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Constructs an HourlyEmployee with hourly wage of 20 and
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * monthly hours of 160.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>HourlyEmployee3</span><span style=color:#f92672>(</span>String aName<span style=color:#f92672>,</span> Date aHireDate<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>(</span>aName<span style=color:#f92672>,</span> aHireDate<span style=color:#f92672>,</span> <span style=color:#ae81ff>20.00</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>160.0</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>HourlyEmployee3</span><span style=color:#f92672>(</span>String aName<span style=color:#f92672>,</span> Date aHireDate<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                          <span style=color:#66d9ef>double</span> anHourlyWage<span style=color:#f92672>,</span> <span style=color:#66d9ef>double</span> aMonthlyHours<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>aName<span style=color:#f92672>,</span> aHireDate<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        disallowZeroesAndNegatives<span style=color:#f92672>(</span>anHourlyWage<span style=color:#f92672>,</span> aMonthlyHours<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        hourlyWage <span style=color:#f92672>=</span> anHourlyWage<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        monthlyHours <span style=color:#f92672>=</span> aMonthlyHours<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span></span></span></code></pre></div></div></div></div><div id=outline-container-headline-17 class=outline-3><h3 id=headline-17><code>this</code> and <code>super</code></h3><div id=outline-text-headline-17 class=outline-text-3><ul><li>If present, an explicit constructor call must be the first statement in the constructor.</li><li>Can't have both a <code>super</code> and <code>this</code> call in a constructor.</li><li>A constructor with a <code>this</code> call must call, either directly or indirectly, a constructor with a <code>super</code> call (implicit or explicit).</li></ul><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HourlyEmployee3</span> <span style=color:#66d9ef>extends</span> Employee3 <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>HourlyEmployee3</span><span style=color:#f92672>(</span>String aName<span style=color:#f92672>,</span> Date aHireDate<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>(</span>aName<span style=color:#f92672>,</span> aHireDate<span style=color:#f92672>,</span> <span style=color:#ae81ff>20.00</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>HourlyEmployee3</span><span style=color:#f92672>(</span>String aName<span style=color:#f92672>,</span> Date aHireDate<span style=color:#f92672>,</span> <span style=color:#66d9ef>double</span> anHourlyWage<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>(</span>aName<span style=color:#f92672>,</span> aHireDate<span style=color:#f92672>,</span> anHourlyWage<span style=color:#f92672>,</span> <span style=color:#ae81ff>160.0</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>HourlyEmployee3</span><span style=color:#f92672>(</span>String aName<span style=color:#f92672>,</span> Date aHireDate<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                          <span style=color:#66d9ef>double</span> anHourlyWage<span style=color:#f92672>,</span> <span style=color:#66d9ef>double</span> aMonthlyHours<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>aName<span style=color:#f92672>,</span> aHireDate<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        disallowZeroesAndNegatives<span style=color:#f92672>(</span>anHourlyWage<span style=color:#f92672>,</span> aMonthlyHours<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        hourlyWage <span style=color:#f92672>=</span> anHourlyWage<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        monthlyHours <span style=color:#f92672>=</span> aMonthlyHours<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span></span></span></code></pre></div></div></div></div><div id=outline-container-headline-18 class=outline-3><h3 id=headline-18>The Liskov Substitution Principle (LSP)</h3><div id=outline-text-headline-18 class=outline-text-3>\begin{quote}
Subtypes must be substitutable for their supertypes.
\end{quote}<p>Consider the method:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> Date <span style=color:#a6e22e>vestDate</span><span style=color:#f92672>(</span>Employee employee<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        Date hireDate <span style=color:#f92672>=</span> employee<span style=color:#f92672>.</span><span style=color:#a6e22e>getHireDate</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> vestYear <span style=color:#f92672>=</span> hireDate<span style=color:#f92672>.</span><span style=color:#a6e22e>getYear</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> Date<span style=color:#f92672>(</span>vestYear<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        hireDate<span style=color:#f92672>.</span><span style=color:#a6e22e>getMonth</span><span style=color:#f92672>(),</span>
</span></span><span style=display:flex><span>                        hireDate<span style=color:#f92672>.</span><span style=color:#a6e22e>getDay</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span></span></span></code></pre></div></div><p>We can pass any subtype of <code>Employee</code> to this method:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>        DateFormat df <span style=color:#f92672>=</span> DateFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>getDateInstance</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        HourlyEmployee eva <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HourlyEmployee<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Eva L. Uator&#34;</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                           df<span style=color:#f92672>.</span><span style=color:#a6e22e>parse</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;February 13, 2013&#34;</span><span style=color:#f92672>),</span> <span style=color:#ae81ff>20.00</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>200</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        Date evaVestDate <span style=color:#f92672>=</span> vestDate<span style=color:#f92672>(</span>eva<span style=color:#f92672>);</span></span></span></code></pre></div></div><p>We must ensure that subtypes are indeed substitutable for supertypes.</p></div></div><div id=outline-container-headline-19 class=outline-3><h3 id=headline-19>LSP Counterexample</h3><div id=outline-text-headline-19 class=outline-text-3><p>A suprising counter-example:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Rectangle</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setWidth</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span> w<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#f92672>...</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setHeight</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span> h<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#f92672>...</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Square</span> <span style=color:#66d9ef>extends</span> Rectangle <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setWidth</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span> w<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>setWidth</span><span style=color:#f92672>(</span>w<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>setHeight</span><span style=color:#f92672>(</span>w<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setHeight</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span> h<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>setWidth</span><span style=color:#f92672>(</span>h<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>setHeight</span><span style=color:#f92672>(</span>h<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><ul><li>We know from math class that a square "is a" rectangle.</li><li>The overridden <code>setWidth</code> and <code>setHeight</code> methods in <code>Square</code> enforce the class invariant of <code>Square</code>, namely, that <code>width == height</code>.</li></ul></div></div><div id=outline-container-headline-20 class=outline-3><h3 id=headline-20>LSP Violation</h3><div id=outline-text-headline-20 class=outline-text-3><p>Consider this client of <code>Rectangle</code>:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>g</span><span style=color:#f92672>(</span>Rectangle r<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  r<span style=color:#f92672>.</span><span style=color:#a6e22e>setWidth</span><span style=color:#f92672>(</span><span style=color:#ae81ff>5</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  r<span style=color:#f92672>.</span><span style=color:#a6e22e>setHeight</span><span style=color:#f92672>(</span><span style=color:#ae81ff>4</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>assert</span> r<span style=color:#f92672>.</span><span style=color:#a6e22e>area</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><ul><li>Client (author of <code>g</code>) assumes width and height are independent in <code>r</code> because <code>r</code> is a <code>Rectangle</code>.</li><li>If the <code>r</code> passed to <code>g</code> is actually an instance of <code>Square</code>, what will be the value of <code>r.area()</code>?</li></ul><p>The Object-oriented <code>is-a</code> relationship is about behavior. <code>Square</code>'s <code>setWidth</code> and <code>setHeight</code> methods don't behave the way a <code>Rectangle</code>'s <code>setWidth</code> and <code>setHeight</code> methods are expected to behave, so a <code>Square</code> doesn't fit the object-oriented <strong>is-a</strong> <code>Rectangle</code> definition. Let's make this more formal …</p></div></div><div id=outline-container-headline-21 class=outline-3><h3 id=headline-21>Conforming to LSP: Design by Contract</h3><div id=outline-text-headline-21 class=outline-text-3><blockquote><p>Require no more, promise no less.</p></blockquote><p>Author of a class specifies the behavior of each method in terms of preconditions and postconditions. Subclasses must follow two rules:</p><ul><li>Preconditions of overriden methods must be equal to or weaker than those of the superclass (enforces or assumes no more than the constraints of the superclass method).</li><li>Postconditions of overriden methods must be equal to or greater than those of the superclass (enforces all of the constraints of the superclass method and possibly more).</li></ul><p>In the Rectangle-Square case the postcondition of <code>Rectangle</code>'s <code>setWidth</code> method:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>assert</span><span style=color:#f92672>((</span>rectangle<span style=color:#f92672>.</span><span style=color:#a6e22e>w</span> <span style=color:#f92672>==</span> w<span style=color:#f92672>)</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>(</span>rectangle<span style=color:#f92672>.</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>==</span> old<span style=color:#f92672>.</span><span style=color:#a6e22e>height</span><span style=color:#f92672>))</span></span></span></code></pre></div></div><p>cannot be satisfied by <code>Square</code>, which tells us that a <code>Square</code> doesn't satisfy the object-oriented <strong>is-a</strong> relationship to <code>Rectangle</code>.</p></div></div><div id=outline-container-headline-22 class=outline-3><h3 id=headline-22>LSP Conforming 2D Shapes</h3><div id=outline-text-headline-22 class=outline-text-3><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#960050;background-color:#1e0010>2</span><span style=color:#a6e22e>dShape</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>area</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Rectangle</span> <span style=color:#66d9ef>implements</span> <span style=color:#ae81ff>2d</span>Shape <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setWidth</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span> w<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#f92672>...</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setHeight</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span> h<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#f92672>...</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>area</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> width <span style=color:#f92672>*</span> height<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Square</span> <span style=color:#66d9ef>implements</span> <span style=color:#ae81ff>2d</span>Shape <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setSide</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span> w<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#f92672>...</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>area</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> side <span style=color:#f92672>*</span> side<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>Notice the use of an <a href=http://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html>interface</a> to define a type.</p></div></div><div id=outline-container-headline-23 class=outline-3><h3 id=headline-23>Interfaces</h3><div id=outline-text-headline-23 class=outline-text-3><p>An interface represents an object-oriented type: a set of public methods (declarations, not definitions) that any object of the type supports. Recall the <code>2dShape</code> interface:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#960050;background-color:#1e0010>2</span><span style=color:#a6e22e>dShape</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>area</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>You can't instantiate interfaces. So you must define a class that implements the interface in order to use it. Implementing an interface is similar to extending a class, but uses the <code>implements</code> keyword:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Square</span> <span style=color:#66d9ef>implements</span> <span style=color:#ae81ff>2d</span>Shape <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setSide</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span> w<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#f92672>...</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>area</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> side <span style=color:#f92672>*</span> side<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>Now a <code>Square</code> <strong>is-a</strong> <code>2dShape</code>.</p></div></div><div id=outline-container-headline-24 class=outline-3><h3 id=headline-24>Interfaces Define a Type</h3><div id=outline-text-headline-24 class=outline-text-3><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#960050;background-color:#1e0010>2</span><span style=color:#a6e22e>dShape</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>area</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>This means that any object of type <code>2dShape</code> supports the <code>area</code> method, so we can write code like this:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>calcTotalArea</span><span style=color:#f92672>(</span><span style=color:#ae81ff>2d</span>Shape <span style=color:#f92672>...</span> shapes<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> area <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#ae81ff>2d</span>Shape shape<span style=color:#f92672>:</span> shapes<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        area <span style=color:#f92672>+=</span> shape<span style=color:#f92672>.</span><span style=color:#a6e22e>area</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> area<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>Two kinds of inheritance: <strong>implementation</strong> and <strong>interface</strong> inheritance.</p><ul><li>extending a class means inheriting both the interface and the implementation of the superclass</li><li>implementing an interface means inheriting only the interface, that is, the public methods</li></ul></div></div><div id=outline-container-headline-25 class=outline-3><h3 id=headline-25>Default Methods in Interfaces</h3><div id=outline-text-headline-25 class=outline-text-3><p>Normally, an interface declares methods that concrete classes must implement.</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Named</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    String <span style=color:#a6e22e>getName</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><ul><li>Beginning with Java 8 (jdk1.8), interface methods can have default method implementations. Default methods can only reference local variables and static variables defined in the interface or any superinterfaces.</li></ul><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Destiny</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Child&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>say</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;my &#34;</span> <span style=color:#f92672>+</span> getName<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><ul><li>Interfaces can also have static methods, which can't access instance state anyway.</li></ul></div></div><div id=outline-container-headline-26 class=outline-3><h3 id=headline-26>Conflicting Methods From Interfaces and Superclasses</h3><div id=outline-text-headline-26 class=outline-text-3><p>Superclasses win.</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AbstractPerson</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>AbstractPerson</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>So this is OK: the <code>getName</code> method from <code>AbstractPerson</code> wins.</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>GoodPerson</span> <span style=color:#66d9ef>extends</span> AbstractPerson <span style=color:#66d9ef>implements</span> Destiny <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>GoodPerson</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>name<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div></div></div><div id=outline-container-headline-27 class=outline-3><h3 id=headline-27>Conflicting Default Methods from Interfaces</h3><div id=outline-text-headline-27 class=outline-text-3><p>Interfaces clash.</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Destiny</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Child&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span> <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Maggot</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Robert Paulson&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div><p>So this won't compile:</p><div class="src src-java"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BadPerson</span> <span style=color:#66d9ef>implements</span> Destiny<span style=color:#f92672>,</span> Maggot <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Won&#39;t compile -- Destiny and Maggot both define default getName methods
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span></span></span></code></pre></div></div></div></div><div id=outline-container-headline-28 class=outline-3><h3 id=headline-28>Programming Exercise</h3><div id=outline-text-headline-28 class=outline-text-3><p>To get some practice writing classes that use inheritance, write:</p><ul><li>A class named <code>Animal</code> with:</li><li>A private instance variable <code>name</code>, with a public getter and setter. (Note: <code>name</code> is a name of an animal, not the animal's species.)</li><li>A single constructor that takes the name of the <code>Animal</code></li><li>A public instance method <code>speak</code> that returns a <code>String</code> representation of the sound it makes.</li></ul><ul><li>A class named <code>Dog</code> that extends <code>Animal</code> and specializes the <code>speak</code> method appropriately.</li><li>A <code>Kennel</code> class with</li><li>a private instance variable <code>dogs</code> that is an array of <code>Dog</code></li><li>a single constructor that takes a variable number of single <code>Dog</code> parameters and initializes the <code>dogs</code> instance variable with the constructor's actual parameters.</li><li>a method <code>soundOff()</code> that prints to <code>STDOUT</code> (<code>System.out</code>) one line for each <code>Dog</code> in <code>dogs</code> that reads "[dog name] says [output of <code>speak</code> method]!", e.g. "Chloe says woof, woof!"</li></ul><p>We'll review this at the start of the next lecture.</p></div></div></div></div></main><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js integrity=sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script>
<script src=../js/bootstrap.min.js></script></body></html>