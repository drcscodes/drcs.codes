<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Stocks</title><meta name=viewport content="width=device-width"><link rel=stylesheet href=https://DrCS.codes/css/syntax.css><link rel=stylesheet href=https://DrCS.codes/css/main.css><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link href=/css/navbar-fixed-top.css rel=stylesheet><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script>
<script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script><script type=text/x-mathjax-config>
  MathJax.Hub.Queue(function() {
    // Fix <code> tags after MathJax finishes running. This is a
    // hack to overcome a shortcoming of Markdown. Discussion at
    // https://github.com/mojombo/jekyll/issues/199
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i &lt; all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script></head><body><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark"><a class=navbar-brand href=/python></a>
<span class=navbar-toggler-icon></span></a><div class="navbar-collapse collapse" id=navbarCollapse><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link onclick=history.back()>Back to course</a></li></ul><ul class="navbar-nav pull-right"><li class="nav-item pull-right"><a class=nav-link href=https://DrCS.codes>Dr. CS codes</a></li></ul></div></nav><div class=container><h1 id=stocks>Stocks</h1><h2 id=introduction>Introduction</h2><p>In this project you will practice</p><ul><li>writing classes,</li><li>reading CSV files,</li><li>using control structures, and</li><li>manipulating data structures.</li></ul><h2 id=problem-description>Problem Description</h2><p>You need to process daily stock prices that are stored in CSV files. Each stock is stored in a CSV file named after the stock&rsquo;s ticker symbol. For example, the stock prices for Alphabet, Inc are stored in a file named <code>GOOG.csv</code>.</p><h2 id=solution-description>Solution Description</h2><p>Write a module named <code>stocks</code> that includes two classes:</p><ul><li><p><code>Company</code> with the following instance attributes:</p><ul><li><code>symbol</code>: <code>str</code> &ndash; the official stock ticker symbol</li><li><code>name</code>: <code>str</code> &ndash; the company&rsquo;s name</li><li><code>sector</code>: <code>str</code> &ndash; the company&rsquo;s sector, as defined by <a href=https://finance.yahoo.com/industries>Yahoo Finance</a></li><li><code>stock_data</code>: <code>dict[datetime, StockData]</code> &ndash; a dictionary mapping <a href=https://docs.python.org/3/library/datetime.html#datetime-objects><code>datetime</code></a> objects to <code>StockData</code> objects</li></ul><p>and the following instance methods:</p><ul><li><p><code>__init__</code> &ndash; which takes arguments that are used to initialize the values of the instance attribute listed above (except <code>stock_data</code>), in the order listed above. Only the <code>symbol</code> must be provided when creating a <code>Company</code> instance, the other instance attributes (except <code>stock_data</code>) should have the value <code>None</code> if not provided as arguments to <code>__init__</code> when creating a <code>Company</code> object.</p></li><li><p>a method which is automatically called whenever a <code>Company</code> object is printed or converted to a <code>str</code> and returns a string with the company&rsquo;s name and stock symbol in parentheses, e.g., <code>Alphabet (GOOG)</code></p></li><li><p>a method which is automatically called by the Python REPL to print the value of a <code>Company</code> object to the console and returns a string with the class name and all the attributes (except <code>stock_data</code>) between angle brackets, e.g., <code>&lt;Company: name=Alphabet, symbol=GOOG, sector=Technology></code></p></li><li><p><code>performance</code> &ndash; which takes an optional start date and optional end date and returns the percentage return (as a <code>float</code>, e.g., 20% is .20, 120% is 1.20) from the open price on the start date to the adjusted closing price on the end date, i.e., if you multiply the open price on the start date by the value returned by this function and add that result to the open price on the start date, you get the adjusted closing price on the end date. Dates should be <a href=https://docs.python.org/3/library/datetime.html#datetime-objects>datetime</a> objects with date components but no time components.</p><ul><li>If the start date is not in <code>stock_data</code>, use the next date after the specified start date for which there is data.</li><li>If the start date is not provided, use the first date in <code>stock_data</code>.</li><li>If the end date is not in <code>stock_data</code>, use the last date before the specified end date for which there is data.</li><li>If the end date is not provided, use the last date in <code>stock_data</code>.</li></ul></li></ul></li><li><p><code>StockData</code> with the following instance attributes to store the data found in a record in a stock data CSV file:</p><ul><li><code>open_price</code>: <code>float</code></li><li><code>high</code>: <code>float</code></li><li><code>low</code>: <code>float</code></li><li><code>close</code>: <code>float</code></li><li><code>adj_close</code>: <code>float</code></li><li><code>volume</code>: <code>int</code></li></ul><p>and an instance method that makes instances of <code>StockData</code> comparable to each other using the <code>&lt;</code> operator based on the values of their <code>adj_close</code> attributes.</p></li></ul><p>Finally, your <code>stocks</code> module should be runnable as a script that takes three command line arguments: a company&rsquo;s stock symbol, a start date, and an end date.</p><ul><li>The stock symbol, e.g., <code>GOOG</code> is required.</li><li>Start date and end date are optional. If either is not supplied, follow the directions for the <code>Company.performance</code> method above. Note that if you supply only one date, it&rsquo;s the start date. You can&rsquo;t specify an end date but no start date. Date should be in <a href=https://en.wikipedia.org/wiki/ISO_8601>ISO 8601</a> format (see examples below).</li></ul><p>Your script should:</p><ul><li>create a <code>Company</code> object with the symbol but no company name or sector,</li><li>read a CSV file in its working directory which is named after the stock symbol (with a .csv ending),</li><li>use the data in the CSV file to populate the <code>Company</code> object&rsquo;s <code>stock_data</code> dictionary,</li><li>use the <code>Company</code> object&rsquo;s <code>performance</code> method to find the requested stock return, and</li><li>print a report as in the examples below. Note that the performance reported by the scrip t should be in percentage format, not a <code>float</code> as returned by <code>Company.performance</code>.</li></ul><p>Your <code>stocks</code> module not perform any of the script actions listed above when imported as a module.</p><p>Your program should work with CSV files formatted and named like the ones you can download from Yahoo Finace, e.g., <a href="https://finance.yahoo.com/quote/GOOG/history?p=GOOG">Alphabet, Inc historical data</a>. For your convenience you may use the following files: <a href=../../data/AAPL.csv>AAPL.csv</a>, <a href=../../data/BAC.csv>BAC.csv</a>, <a href=../../data/C.csv>C.csv</a>, <a href=../../data/CSCO.csv>CSCO.csv</a>, <a href=../../data/F.csv>F.csv</a>, <a href=../../data/FB.csv>FB.csv</a>, <a href=../../data/FCAU.csv>FCAU.csv</a>, <a href=../../data/GM.csv>GM.csv</a>, <a href=../../data/GOOG.csv>GOOG.csv</a>, <a href=../../data/JPM.csv>JPM.csv</a>, <a href=../../data/ORCL.csv>ORCL.csv</a>, <a href=../../data/WFC.csv>WFC.csv</a>.</p><p>Here are some sample program runs:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ python stocks.py GOOG
</span></span><span style=display:flex><span>Stock performance of None <span style=color:#f92672>(</span>GOOG<span style=color:#f92672>)</span> from 2004-08-19 to 2017-09-21: 1777.0%.
</span></span><span style=display:flex><span>$ python stocks.py GOOG 2017-01-01
</span></span><span style=display:flex><span>Stock performance of None <span style=color:#f92672>(</span>GOOG<span style=color:#f92672>)</span> from 2017-01-01 to 2017-09-21: 19.7%.
</span></span><span style=display:flex><span>$ python stocks.py GOOG 2015-01-01 2017-09-21
</span></span><span style=display:flex><span>Stock performance of None <span style=color:#f92672>(</span>GOOG<span style=color:#f92672>)</span> from 2015-01-01 to 2017-09-21: 77.2%.
</span></span></code></pre></div><h2 id=tips-and-considerations>Tips and Considerations</h2><ul><li>I&rsquo;m not a finance expert, so if I&rsquo;ve misconstrued some aspects of stocks, consider this assignment as practice in following specifications <em>as written</em> rather than using your own domain knowledge.</li><li>You&rsquo;ll want to use <a href=https://docs.python.org/3/library/datetime.html>Python&rsquo;s datetime module</a>, in particular you&rsquo;ll find <a href=https://docs.python.org/3/library/datetime.html#datetime.datetime.strptime>datetime.strptime</a> useful.</li></ul></div><script src=js/bootstrap.min.js></script></body></html>