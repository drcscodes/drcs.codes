<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Dr. CS codes Classes and Objects</title><meta name=viewport content="width=device-width"><link rel=stylesheet href=https://DrCS.codes/css/syntax.css><link rel=stylesheet href=https://DrCS.codes/css/main.css><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link href=https://DrCS.codes/css/navbar-top-fixed.css rel=stylesheet></head><body><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark"><a class=navbar-brand href=/professional-python>Classes and Objects</a>
<button type=button class=navbar-toggler data-toggle=collapse data-target=#navbarCollapse aria-controls=navbarCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="navbar-collapse collapse" id=navbarCollapse><ul class="navbar-nav mr-auto"></ul><ul class="navbar-nav pull-right"><li class="nav-item pull-right"><a class=nav-link href=https://DrCS.codes>Dr. CS codes</a></li></ul></div></nav><main role=main class=container><h2 id=python-is-object-oriented>Python is Object-Oriented</h2><p>Every value in Python is an object, meaning an instance of a class. Even values that are considered &ldquo;primitive&rdquo; in some other languages.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> type(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>class</span> <span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>int</span><span style=color:#e6db74>&#39;&gt;</span>
</span></span></code></pre></div><h2 id=class-definitions>Class Definitions</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#960050;background-color:#1e0010>&lt;</span><span style=color:#a6e22e>class_name</span><span style=color:#f92672>&gt;</span>(<span style=color:#f92672>&lt;</span>superclasses<span style=color:#f92672>&gt;</span>):
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span>body<span style=color:#f92672>&gt;</span>
</span></span></code></pre></div><ul><li><code>&lt;class_name></code> is an identifier</li><li><code>&lt;superclasses></code> is a comma-separated list of superclasses. Can be empty, in which case <code>object</code> is implicit superclass</li><li><code>&lt;body></code> is a non-empty sequence of statements</li></ul><p>A class definition creates a class object in much the same way that a function definition creates a function object.</p><h2 id=class-attributes>Class Attributes</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Stark</span>:
</span></span><span style=display:flex><span>    creator <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;George R.R. Martin&#34;</span>
</span></span><span style=display:flex><span>    words <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Winter is coming&#34;</span>
</span></span><span style=display:flex><span>    sigil <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Direwolf&#34;</span>
</span></span><span style=display:flex><span>    home <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Winterfell&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __init__(self, name<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> name <span style=color:#66d9ef>if</span> name <span style=color:#66d9ef>else</span> <span style=color:#e6db74>&#34;No one&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>full_name</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{}</span><span style=color:#e6db74> Stark&#34;</span><span style=color:#f92672>.</span>format(self<span style=color:#f92672>.</span>name)
</span></span></code></pre></div><p><code>creator</code>, <code>words</code>, <code>sigil</code>, and <code>home</code> are <em>class attributes</em>. Class attributes belong to the class and are shared by all instances</p><h2 id=instance-attributes>Instance Attributes</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Stark</span>:
</span></span><span style=display:flex><span>    creator <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;George R.R. Martin&#34;</span>
</span></span><span style=display:flex><span>    words <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Winter is coming&#34;</span>
</span></span><span style=display:flex><span>    sigil <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Direwolf&#34;</span>
</span></span><span style=display:flex><span>    home <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Winterfell&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __init__(self, name<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> name <span style=color:#66d9ef>if</span> name <span style=color:#66d9ef>else</span> <span style=color:#e6db74>&#34;No one&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>full_name</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{}</span><span style=color:#e6db74> Stark&#34;</span><span style=color:#f92672>.</span>format(self<span style=color:#f92672>.</span>name)
</span></span></code></pre></div><ul><li><code>self.name</code> is an instance attribute becuase it is prefaced with <code>self.</code> and defined in a method that has a first parameter named <code>self</code>. Each instance of the class has its own copies of instance attributes.</li><li><code>full_name</code> is an instance method because it defined in a class and has at least one parameter. The first parameter is implicitly a reference to the instance on which a method is called.</li></ul><h2 id=classes-and-objects>Classes and Objects</h2><p>In this example, <code>ned</code> and <code>robb</code> are <em>instances</em> of <code>Stark</code>. Each instance has it&rsquo;s own <code>name</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#f92672>import</span> got
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> ned <span style=color:#f92672>=</span> got<span style=color:#f92672>.</span>Stark(<span style=color:#e6db74>&#34;Eddard&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> ned<span style=color:#f92672>.</span>name
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;Eddard&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> robb <span style=color:#f92672>=</span> got<span style=color:#f92672>.</span>Stark(<span style=color:#e6db74>&#34;Robb&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> robb<span style=color:#f92672>.</span>name
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;Robb&#39;</span>
</span></span></code></pre></div><p>Ivoking the <code>full_name()</code> method on an object implicitly passes the object as the first argument (<code>self</code>), which you could (but shoudn&rsquo;t) do explicitly:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> ned<span style=color:#f92672>.</span>full_name()          <span style=color:#75715e># This is normal</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;Eddard Stark&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> got<span style=color:#f92672>.</span>Stark<span style=color:#f92672>.</span>full_name(ned) <span style=color:#75715e># This is only instructive</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;Eddard Stark&#39;</span>
</span></span></code></pre></div><h2 id=class-members>Class Members</h2><p>Each instance shares the class attributes <code>creator</code>, <code>words</code>, <code>sigil</code>, and <code>home</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> got<span style=color:#f92672>.</span>Stark<span style=color:#f92672>.</span>sigil
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;Direwolf&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> ned<span style=color:#f92672>.</span>sigil
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;Direwolf&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> robb<span style=color:#f92672>.</span>sigil
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;Direwolf&#39;</span>
</span></span></code></pre></div><p>Remember that the <code>is</code> operator returns <code>True</code> if its operands reference the same object in memory. So this deomonstrates that <code>sigil</code> is shared between the <code>Stark</code> class and all instances of the <code>Stark</code> class:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> got<span style=color:#f92672>.</span>Stark<span style=color:#f92672>.</span>sigil <span style=color:#f92672>is</span> ned<span style=color:#f92672>.</span>sigil
</span></span><span style=display:flex><span><span style=color:#66d9ef>True</span>
</span></span></code></pre></div><h2 id=superclasses>Superclasses</h2><p>Superclasses, or parent classes, or base classes, define attributes that you wish to be common to a family of objects.</p><p>Notice that all of our noble houses have the same creator, and every instance has a name. We can represent this commonality by creating a base class for all house classes:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>GotCharacter</span>:
</span></span><span style=display:flex><span>    creator <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;George R.R. Martin&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __init__(self, name<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> name <span style=color:#66d9ef>if</span> name <span style=color:#66d9ef>else</span> <span style=color:#e6db74>&#34;No one&#34;</span>
</span></span></code></pre></div><h2 id=refactored-stark>Refactored <code>Stark</code></h2><p>Here is <code>Stark</code> refactored to use the <code>GotCharacter</code> superclass:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Stark</span>(GotCharacter):
</span></span><span style=display:flex><span>    words <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Winter is coming&#34;</span>
</span></span><span style=display:flex><span>    sigil <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Direwolf&#34;</span>
</span></span><span style=display:flex><span>    home <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Winterfell&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __init__(self, name):
</span></span><span style=display:flex><span>        <span style=color:#75715e># This is how you invoke a superclass method</span>
</span></span><span style=display:flex><span>        super()<span style=color:#f92672>.</span>__init__(name)
</span></span></code></pre></div><p>Exercise: refactor the other GoT houses to use the <code>GotCharacter</code> superclass.</p><h2 id=magic-aka-dunder-methods>Magic, a.k.a., Dunder Methods</h2><p>Methods with names that begin and end with <code>__</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SuperTrooper</span>(Trooper):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __init__(self, name, is_mustached):
</span></span><span style=display:flex><span>        super()<span style=color:#f92672>.</span>__init__(name)
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>is_mustached <span style=color:#f92672>=</span> is_mustached
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Used by print()</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __str__(self):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;&lt;</span><span style=color:#e6db74>{}</span><span style=color:#e6db74> </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&gt;&#34;</span><span style=color:#f92672>.</span>format(self<span style=color:#f92672>.</span>name, <span style=color:#e6db74>&#34;:-{&#34;</span> <span style=color:#66d9ef>if</span> self<span style=color:#f92672>.</span>is_mustached <span style=color:#66d9ef>else</span> <span style=color:#e6db74>&#34;:-|&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Used by REPL</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __repr__(self):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> str(self)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Makes instances of SuperTrooper orderable</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __lt__(self, other):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> self<span style=color:#f92672>.</span>is_mustached <span style=color:#f92672>and</span> <span style=color:#f92672>not</span> other<span style=color:#f92672>.</span>is_mustached:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>elif</span> <span style=color:#f92672>not</span> self<span style=color:#f92672>.</span>is_mustached <span style=color:#f92672>and</span> other<span style=color:#f92672>.</span>is_mustached:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> self<span style=color:#f92672>.</span>name <span style=color:#f92672>&lt;</span> other<span style=color:#f92672>.</span>name
</span></span></code></pre></div><h2 id=sortable-supertroopers>Sortable SuperTroopers</h2><p>With the definition of <code>__lt__(self, other)</code> in <code>SuperTrooper</code>, a list of <code>SuperTrooper</code> is sortable.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    sts <span style=color:#f92672>=</span> [SuperTrooper(<span style=color:#e6db74>&#34;Thorny&#34;</span>, <span style=color:#66d9ef>True</span>),
</span></span><span style=display:flex><span>           SuperTrooper(<span style=color:#e6db74>&#34;Mac&#34;</span>, <span style=color:#66d9ef>True</span>),
</span></span><span style=display:flex><span>           SuperTrooper(<span style=color:#e6db74>&#34;Rabbit&#34;</span>, <span style=color:#66d9ef>True</span>),
</span></span><span style=display:flex><span>           SuperTrooper(<span style=color:#e6db74>&#34;Farva&#34;</span>, <span style=color:#66d9ef>True</span>),
</span></span><span style=display:flex><span>           SuperTrooper(<span style=color:#e6db74>&#34;Foster&#34;</span>, <span style=color:#66d9ef>False</span>)]
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;SuperTroopers:&#34;</span>)
</span></span><span style=display:flex><span>    print(sts)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;SuperTroopers sorted by mustache, then by name:&#34;</span>)
</span></span><span style=display:flex><span>    print(sorted(sts))
</span></span></code></pre></div><p>Produces:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>SuperTroopers:
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>&lt;Thorny :-<span style=color:#f92672>{</span>&gt;, &lt;Mac :-<span style=color:#f92672>{</span>&gt;, &lt;Rabbit :-<span style=color:#f92672>{</span>&gt;, &lt;Farva :-<span style=color:#f92672>{</span>&gt;, &lt;Foster :-|&gt;<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>SuperTroopers sorted by mustache, <span style=color:#66d9ef>then</span> by name:
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>&lt;Foster :-|&gt;, &lt;Farva :-<span style=color:#f92672>{</span>&gt;, &lt;Mac :-<span style=color:#f92672>{</span>&gt;, &lt;Rabbit :-<span style=color:#f92672>{</span>&gt;, &lt;Thorny :-<span style=color:#f92672>{</span>&gt;<span style=color:#f92672>]</span>
</span></span></code></pre></div><h2 id=final-thoughts>Final Thoughts</h2><p>Recall the design of the Game of Thrones character types:</p><ul><li>A superclass <code>GotCharacter</code> with class attributes common to Got characters of all houses.</li><li>A class for each house, subclassing <code>GotCharacter</code> and defining the common attributes of all house members.<ul><li>Each character is an instance of one of these house classes, like <code>Lannister</code>, <code>Stark</code>, etc.</li></ul></li></ul><p>Is this a good design? What if you had an instance of a <code>Stark</code> and you later found out that they&rsquo;re a <code>Targaryen</code>? Refactor the design of the Got character classes to allow a character to change houses without having to modify the code and re-run the program.</p><h2 id=conclusion>Conclusion</h2><p><a href=https://www.youtube.com/embed/az5qOjhsang>Magic!</a></p></main><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js integrity=sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script>
<script src=../js/bootstrap.min.js></script></body></html>