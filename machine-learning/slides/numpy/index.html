<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Dr. CS codes</title><meta name=viewport content="width=device-width"><link rel=stylesheet href=https://DrCS.codes/css/syntax.css><link rel=stylesheet href=https://DrCS.codes/css/main.css><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link href=https://DrCS.codes/css/navbar-top-fixed.css rel=stylesheet></head><body><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark"><a class=navbar-brand href=/machine-learning></a>
<button type=button class=navbar-toggler data-toggle=collapse data-target=#navbarCollapse aria-controls=navbarCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="navbar-collapse collapse" id=navbarCollapse><ul class="navbar-nav mr-auto"></ul><ul class="navbar-nav pull-right"><li class="nav-item pull-right"><a class=nav-link href=https://DrCS.codes>Dr. CS codes</a></li></ul></div></nav><main role=main class=container><p>% NumPy</p><h2 id=numerical-python>Numerical Python</h2><p>Provides efficient storage and operations on dense data buffers, i.e., arrays.</p><ul><li><code>ndarray</code> is the fundamental object</li><li>Vectorized operations on arrays</li><li>Broadcasting</li><li>File IO amd memory-mapped files</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>1</span>]: <span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span></code></pre></div><h2 id=numpy-array-element-types>NumPy Array Element Types</h2><p>Arrays have elements of homogeneous data type</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>2</span>]: a <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>array([<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3.14</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>3</span>]: type(a)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>3</span>]: numpy<span style=color:#f92672>.</span>ndarray
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>4</span>]: a
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>4</span>]: array([ <span style=color:#ae81ff>1.</span>  ,  <span style=color:#ae81ff>2.</span>  ,  <span style=color:#ae81ff>3.14</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>5</span>]: type(a[<span style=color:#ae81ff>0</span>])
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>5</span>]: numpy<span style=color:#f92672>.</span>float64
</span></span></code></pre></div><ul><li>Notice that the values were converted to floats.</li></ul><p>You can specify an explicit element type with the <code>dtype</code> keyword argument:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>6</span>]: np<span style=color:#f92672>.</span>array(nums, dtype<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;int&#39;</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>6</span>]: array([<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>])
</span></span></code></pre></div><h2 id=one-dimensional-arrays>One-dimensional Arrays</h2><p>Pass list to <code>np.array()</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>9</span>]: np<span style=color:#f92672>.</span>array([<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>])
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>9</span>]:
</span></span><span style=display:flex><span>array([<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>])
</span></span></code></pre></div><p>Create a one-dimensional array of zeros, <code>dtype</code> defaults to <code>float</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>10</span>]: np<span style=color:#f92672>.</span>zeros(<span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>10</span>]: array([ <span style=color:#ae81ff>0.</span>,  <span style=color:#ae81ff>0.</span>,  <span style=color:#ae81ff>0.</span>,  <span style=color:#ae81ff>0.</span>])
</span></span></code></pre></div><p><code>np.arange</code> similar to Python&rsquo;s built-in <code>range(start, end, stride)</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>13</span>]: np<span style=color:#f92672>.</span>arange(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>13</span>]: array([<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>8</span>])
</span></span></code></pre></div><h2 id=multi-dimensional-arrays>Multi-Dimensional Arrays</h2><p>Passing nested lists to <code>np.array()</code> create multi-dimensional arrays:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>9</span>]: np<span style=color:#f92672>.</span>array([[<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>],[<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>6</span>]])
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>9</span>]:
</span></span><span style=display:flex><span>array([[<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>],
</span></span><span style=display:flex><span>       [<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>6</span>]])
</span></span></code></pre></div><p>Create a multi-dimensional array of 1s with element type <code>int</code>. Note that first argument is a tuple of array dimensions.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>11</span>]: np<span style=color:#f92672>.</span>ones((<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>), dtype<span style=color:#f92672>=</span>int)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>11</span>]:
</span></span><span style=display:flex><span>array([[<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>       [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>]])
</span></span></code></pre></div><p>Create a 2-d array of the same element values:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>12</span>]: np<span style=color:#f92672>.</span>full((<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>), <span style=color:#ae81ff>2.72</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>12</span>]:
</span></span><span style=display:flex><span>array([[ <span style=color:#ae81ff>2.72</span>,  <span style=color:#ae81ff>2.72</span>,  <span style=color:#ae81ff>2.72</span>],
</span></span><span style=display:flex><span>       [ <span style=color:#ae81ff>2.72</span>,  <span style=color:#ae81ff>2.72</span>,  <span style=color:#ae81ff>2.72</span>]])
</span></span></code></pre></div><h2 id=creating-arrays-of-random-numbers>Creating Arrays of Random Numbers</h2><p>Creat a 2 x 3 array of values uniformly distributed between 0 and 1:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>28</span>]: np<span style=color:#f92672>.</span>random<span style=color:#f92672>.</span>random((<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>))
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>28</span>]:
</span></span><span style=display:flex><span>array([[ <span style=color:#ae81ff>0.93923457</span>,  <span style=color:#ae81ff>0.41299137</span>,  <span style=color:#ae81ff>0.07451052</span>],
</span></span><span style=display:flex><span>       [ <span style=color:#ae81ff>0.32800936</span>,  <span style=color:#ae81ff>0.44435825</span>,  <span style=color:#ae81ff>0.4520937</span> ]])
</span></span></code></pre></div><p>Normally distributed with $\mu = 71.36$ and $\sigma = 14.79$:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>26</span>]: np<span style=color:#f92672>.</span>random<span style=color:#f92672>.</span>normal(<span style=color:#ae81ff>71.36</span>, <span style=color:#ae81ff>14.79</span>, (<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>))
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>26</span>]:
</span></span><span style=display:flex><span>array([[ <span style=color:#ae81ff>71.24362489</span>,  <span style=color:#ae81ff>61.05019638</span>,  <span style=color:#ae81ff>72.25408014</span>],
</span></span><span style=display:flex><span>       [ <span style=color:#ae81ff>63.03759916</span>,  <span style=color:#ae81ff>70.64992342</span>,  <span style=color:#ae81ff>75.94207076</span>]])
</span></span></code></pre></div><p>Create a 2 x 3 array of <code>int</code> values in the interval [1, 11):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>29</span>]: np<span style=color:#f92672>.</span>random<span style=color:#f92672>.</span>randint(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>11</span>, (<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>))
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>29</span>]:
</span></span><span style=display:flex><span>array([[<span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>6</span>],
</span></span><span style=display:flex><span>       [<span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>9</span>]])
</span></span></code></pre></div><p>3-d identity matrix:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>31</span>]: np<span style=color:#f92672>.</span>identity(<span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>31</span>]:
</span></span><span style=display:flex><span>array([[ <span style=color:#ae81ff>1.</span>,  <span style=color:#ae81ff>0.</span>,  <span style=color:#ae81ff>0.</span>],
</span></span><span style=display:flex><span>       [ <span style=color:#ae81ff>0.</span>,  <span style=color:#ae81ff>1.</span>,  <span style=color:#ae81ff>0.</span>],
</span></span><span style=display:flex><span>       [ <span style=color:#ae81ff>0.</span>,  <span style=color:#ae81ff>0.</span>,  <span style=color:#ae81ff>1.</span>]])
</span></span></code></pre></div><h2 id=numpy-array-attributes>NumPy Array Attributes</h2><p>Given:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>33</span>]: a <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>array([[<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>], [<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>6</span>]])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>34</span>]: a
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>34</span>]:
</span></span><span style=display:flex><span>array([[<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>],
</span></span><span style=display:flex><span>       [<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>6</span>]])
</span></span></code></pre></div><p><code>ndim</code> is the number of dimensions:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>37</span>]: a<span style=color:#f92672>.</span>ndim
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>37</span>]: <span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p><code>shape</code> is a tuple giving the number of elements in each dimension:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>35</span>]: a<span style=color:#f92672>.</span>shape
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>35</span>]: (<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>)
</span></span></code></pre></div><p><code>dtype</code> is the type of the elements</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>36</span>]: a<span style=color:#f92672>.</span>dtype
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>36</span>]: dtype(<span style=color:#e6db74>&#39;int64&#39;</span>)
</span></span></code></pre></div><h2 id=1-d-array-indexing-and-slicing>1-D Array Indexing and Slicing</h2><p>1-d arrays similar to Python lists:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>41</span>]: a1 <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>arange(<span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>44</span>]: a1[<span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>44</span>]: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>45</span>]: a1[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>45</span>]: <span style=color:#ae81ff>9</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>46</span>]: a1[<span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>5</span>]
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>46</span>]: array([<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>])
</span></span></code></pre></div><p>Assignment of single value to a (sub)range /broadcasts/ the value to the (sub)range:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>47</span>]: a1[<span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>5</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>11</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>48</span>]: a1
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>48</span>]: array([ <span style=color:#ae81ff>0</span>,  <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>11</span>,  <span style=color:#ae81ff>5</span>,  <span style=color:#ae81ff>6</span>,  <span style=color:#ae81ff>7</span>,  <span style=color:#ae81ff>8</span>,  <span style=color:#ae81ff>9</span>])
</span></span></code></pre></div><p>Notice that the original array is modified.</p><h2 id=2-d-array-indexing-and-slicing>2-D Array Indexing and Slicing</h2><p>Given:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>49</span>]: a3 <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>array([[<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>],[<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>6</span>],[<span style=color:#ae81ff>7</span>,<span style=color:#ae81ff>8</span>,<span style=color:#ae81ff>9</span>]])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>50</span>]: a3
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>50</span>]:
</span></span><span style=display:flex><span>array([[<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>],
</span></span><span style=display:flex><span>       [<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>6</span>],
</span></span><span style=display:flex><span>       [<span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>9</span>]])
</span></span></code></pre></div><p>Single scalar value:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>51</span>]: a3[<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>51</span>]: <span style=color:#ae81ff>5</span>
</span></span></code></pre></div><p>Subarray:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>52</span>]: a3[<span style=color:#ae81ff>1</span>:, <span style=color:#ae81ff>1</span>:]
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>52</span>]:
</span></span><span style=display:flex><span>array([[<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>6</span>],
</span></span><span style=display:flex><span>       [<span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>9</span>]])
</span></span></code></pre></div><p>Single column:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>53</span>]: a3[:, <span style=color:#ae81ff>2</span>]
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>53</span>]: array([<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>9</span>])
</span></span></code></pre></div><p>Single row:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>54</span>]: a3[<span style=color:#ae81ff>2</span>, :]
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>54</span>]: array([<span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>9</span>])
</span></span></code></pre></div><p>Notice that first index is row, second index is column.</p><h2 id=array-reshaping>Array Reshaping</h2><p>2-d arrays</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>62</span>]: a3 <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>arange(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>13</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>63</span>]: a3
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>63</span>]: array([ <span style=color:#ae81ff>1</span>,  <span style=color:#ae81ff>2</span>,  <span style=color:#ae81ff>3</span>,  <span style=color:#ae81ff>4</span>,  <span style=color:#ae81ff>5</span>,  <span style=color:#ae81ff>6</span>,  <span style=color:#ae81ff>7</span>,  <span style=color:#ae81ff>8</span>,  <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>12</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>64</span>]: a3<span style=color:#f92672>.</span>reshape(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>64</span>]:
</span></span><span style=display:flex><span>array([[ <span style=color:#ae81ff>1</span>,  <span style=color:#ae81ff>2</span>,  <span style=color:#ae81ff>3</span>,  <span style=color:#ae81ff>4</span>],
</span></span><span style=display:flex><span>       [ <span style=color:#ae81ff>5</span>,  <span style=color:#ae81ff>6</span>,  <span style=color:#ae81ff>7</span>,  <span style=color:#ae81ff>8</span>],
</span></span><span style=display:flex><span>       [ <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>12</span>]])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>65</span>]: a3<span style=color:#f92672>.</span>reshape(<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>65</span>]:
</span></span><span style=display:flex><span>array([[ <span style=color:#ae81ff>1</span>,  <span style=color:#ae81ff>2</span>,  <span style=color:#ae81ff>3</span>],
</span></span><span style=display:flex><span>       [ <span style=color:#ae81ff>4</span>,  <span style=color:#ae81ff>5</span>,  <span style=color:#ae81ff>6</span>],
</span></span><span style=display:flex><span>       [ <span style=color:#ae81ff>7</span>,  <span style=color:#ae81ff>8</span>,  <span style=color:#ae81ff>9</span>],
</span></span><span style=display:flex><span>       [<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>12</span>]])
</span></span></code></pre></div><h2 id=python-is-slow>Python is slow</h2><ul><li>Consider an array representing pixels of a &ldquo;one megapixel&rdquo; image:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>20</span>]: image <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>random<span style=color:#f92672>.</span>randint(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>256</span>, (<span style=color:#ae81ff>1000000</span>, <span style=color:#ae81ff>3</span>))
</span></span></code></pre></div><ul><li>This is a deep underwater image which looks very green and we want to increase the &ldquo;blueness&rdquo; by 10% [fn:1]. So we write a function to mutiply pixel elements by a factor:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>60</span>]: <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>mult_elem</span>(image, n, factor):
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>:     <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(len(image)):
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>:         image[i][n] <span style=color:#f92672>=</span> image[i][n] <span style=color:#f92672>*</span> factor
</span></span></code></pre></div><ul><li>This operation is <em>slow</em>:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>61</span>]: <span style=color:#f92672>%</span>timeit mult_elem(image, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1.10</span>)
</span></span><span style=display:flex><span><span style=color:#ae81ff>1.85</span> s <span style=color:#f92672>+/-</span> <span style=color:#ae81ff>16.8</span> ms per loop (mean <span style=color:#f92672>+/-</span> std<span style=color:#f92672>.</span> dev<span style=color:#f92672>.</span> of <span style=color:#ae81ff>7</span> runs, <span style=color:#ae81ff>1</span> loop each)
</span></span></code></pre></div><ul><li>The equivalent vectorized opertation is /300 times faster/:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>62</span>]: <span style=color:#f92672>%</span>timeit image[:, <span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> image[:, <span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> <span style=color:#ae81ff>1.10</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6.23</span> ms <span style=color:#f92672>+/-</span> <span style=color:#ae81ff>.0693</span> ms per loop (mean <span style=color:#f92672>+/-</span> std<span style=color:#f92672>.</span> dev<span style=color:#f92672>.</span> of <span style=color:#ae81ff>7</span> runs, <span style=color:#ae81ff>100</span> loops each)
</span></span></code></pre></div><p>[fn:1] I&rsquo;m not a graphics guy, so just indulge me here.</p><h2 id=vectorized-operations-on-arrays>Vectorized Operations on Arrays</h2><p>Operations between compatibly-shaped arrays or between arrays and scalars are <em>vectorized</em> &ndash; the loop applying the operations to elements of the array(s) is in the compiled C-code layer instead of Python.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>114</span>]: np<span style=color:#f92672>.</span>arange(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>/</span> np<span style=color:#f92672>.</span>arange(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>114</span>]: array([ <span style=color:#ae81ff>2.</span>,  <span style=color:#ae81ff>2.</span>,  <span style=color:#ae81ff>2.</span>,  <span style=color:#ae81ff>2.</span>,  <span style=color:#ae81ff>2.</span>,  <span style=color:#ae81ff>2.</span>,  <span style=color:#ae81ff>2.</span>,  <span style=color:#ae81ff>2.</span>,  <span style=color:#ae81ff>2.</span>])
</span></span></code></pre></div><p>Smaller array is &ldquo;broadcast&rdquo; across the larger array. The simplest example is when the smaller array is a scalar value:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>108</span>]: a <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>arange(<span style=color:#ae81ff>9</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>110</span>]: <span style=color:#ae81ff>2</span> <span style=color:#75715e>## a</span>
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>110</span>]: array([  <span style=color:#ae81ff>1</span>,   <span style=color:#ae81ff>2</span>,   <span style=color:#ae81ff>4</span>,   <span style=color:#ae81ff>8</span>,  <span style=color:#ae81ff>16</span>,  <span style=color:#ae81ff>32</span>,  <span style=color:#ae81ff>64</span>, <span style=color:#ae81ff>128</span>, <span style=color:#ae81ff>256</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>111</span>]: <span style=color:#ae81ff>2</span> <span style=color:#75715e>## a.reshape((3, 3))</span>
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>111</span>]:
</span></span><span style=display:flex><span>array([[  <span style=color:#ae81ff>1</span>,   <span style=color:#ae81ff>2</span>,   <span style=color:#ae81ff>4</span>],
</span></span><span style=display:flex><span>       [  <span style=color:#ae81ff>8</span>,  <span style=color:#ae81ff>16</span>,  <span style=color:#ae81ff>32</span>],
</span></span><span style=display:flex><span>       [ <span style=color:#ae81ff>64</span>, <span style=color:#ae81ff>128</span>, <span style=color:#ae81ff>256</span>]])
</span></span></code></pre></div><p>General braodcasting between multi-dimensional arrays is beyond the scope of this course. See <a href=https://docs.scipy.org/doc/numpy/user/basics.broadcasting.html>the NumPy docs</a> for details.</p><h2 id=masking>Masking</h2><p>First, boolean indexing: you can use a like-shaped array of bools to index into an array, which selects items from the array. The arrays of bools is called a /mask/ and using it to select elements is called /masking/.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>175</span>]: xs <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>array([<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>6</span>,<span style=color:#ae81ff>7</span>,<span style=color:#ae81ff>8</span>,<span style=color:#ae81ff>9</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>177</span>]: xs[[<span style=color:#66d9ef>True</span>, <span style=color:#66d9ef>False</span>, <span style=color:#66d9ef>True</span>, <span style=color:#66d9ef>False</span>, <span style=color:#66d9ef>True</span>, <span style=color:#66d9ef>False</span>, <span style=color:#66d9ef>True</span>, <span style=color:#66d9ef>False</span>, <span style=color:#66d9ef>True</span>, <span style=color:#66d9ef>False</span>]]
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>177</span>]: array([<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>8</span>])
</span></span></code></pre></div><p>Since you can create arrays of bools easily with comparison ufuncs, you can combine boolean indexing with broadcasting to easily mask an array:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>179</span>]: xs[(xs <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>179</span>]: array([<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>8</span>])
</span></span></code></pre></div><p>The comparison operation above is a boolean universal function.</p><h2 id=boolean-ufuncs>Boolean UFuncs</h2><p>Broadcast boolean expressions just like arithmetic expressions:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>163</span>]: exam1scores <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>loadtxt(<span style=color:#e6db74>&#39;exam1grades.txt&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>164</span>]: exam1scores
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>164</span>]:
</span></span><span style=display:flex><span>array([  <span style=color:#ae81ff>72.</span>,   <span style=color:#ae81ff>72.</span>,   <span style=color:#ae81ff>50.</span>,   <span style=color:#ae81ff>65.</span>,   <span style=color:#ae81ff>60.</span>,   <span style=color:#ae81ff>73.</span>,   <span style=color:#ae81ff>93.</span>,   <span style=color:#ae81ff>88.</span>,   <span style=color:#ae81ff>97.</span>, <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>         <span style=color:#ae81ff>84.</span>,   <span style=color:#ae81ff>75.</span>,   <span style=color:#ae81ff>88.</span>,   <span style=color:#ae81ff>75.</span>,   <span style=color:#ae81ff>86.</span>,   <span style=color:#ae81ff>49.</span>,   <span style=color:#ae81ff>65.</span>,   <span style=color:#ae81ff>69.</span>,   <span style=color:#ae81ff>87.</span>])
</span></span></code></pre></div><p>How many people &ldquo;passed&rdquo;? First, you can apply a comparison operator to an array to get an array of boooleans:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>165</span>]: exam1scores <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>70</span>
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>165</span>]:
</span></span><span style=display:flex><span>array([ <span style=color:#66d9ef>True</span>,  <span style=color:#66d9ef>True</span>, <span style=color:#66d9ef>False</span>, <span style=color:#66d9ef>False</span>, <span style=color:#66d9ef>False</span>,  <span style=color:#66d9ef>True</span>,  <span style=color:#66d9ef>True</span>,  <span style=color:#66d9ef>True</span>,  <span style=color:#66d9ef>True</span>, <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>True</span>,  <span style=color:#66d9ef>True</span>,  <span style=color:#66d9ef>True</span>,  <span style=color:#66d9ef>True</span>,  <span style=color:#66d9ef>True</span>, <span style=color:#66d9ef>False</span>, <span style=color:#66d9ef>False</span>, <span style=color:#66d9ef>False</span>,  <span style=color:#66d9ef>True</span>], dtype<span style=color:#f92672>=</span>bool)
</span></span></code></pre></div><p>Then you can apply the <code>np.sum</code> aggregation function to count the booleans in the resulting array of booleans:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>169</span>]: np<span style=color:#f92672>.</span>sum(exam1scores <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>70</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>169</span>]: <span style=color:#ae81ff>77</span>
</span></span></code></pre></div><h2 id=boolean-ufuncs-1>Boolean UFuncs</h2><p>You can also combine comparisons with logical operators. How many Bs?</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>173</span>]: np<span style=color:#f92672>.</span>sum((exam1scores <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>80</span>) <span style=color:#f92672>&amp;</span> (exam1scores <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>90</span>))
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>173</span>]: <span style=color:#ae81ff>27</span>
</span></span></code></pre></div><p>Note the syntax with single <code>&</code> &ndash; NumPy uses efficient bitwise logical operators.</p><h2 id=array-aggregations>Array Aggregations</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>117</span>]: np<span style=color:#f92672>.</span>arange(<span style=color:#ae81ff>10</span>)<span style=color:#f92672>.</span>sum()
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>117</span>]: <span style=color:#ae81ff>45</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>119</span>]: np<span style=color:#f92672>.</span>array([<span style=color:#ae81ff>8</span>,<span style=color:#ae81ff>6</span>,<span style=color:#ae81ff>7</span>,<span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>9</span>])<span style=color:#f92672>.</span>min()
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>119</span>]: <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>120</span>]: np<span style=color:#f92672>.</span>array([<span style=color:#ae81ff>8</span>,<span style=color:#ae81ff>6</span>,<span style=color:#ae81ff>7</span>,<span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>9</span>])<span style=color:#f92672>.</span>max()
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>120</span>]: <span style=color:#ae81ff>9</span>
</span></span></code></pre></div><h2 id=2-d-aggregations>2-D Aggregations</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>131</span>]: np<span style=color:#f92672>.</span>arange(<span style=color:#ae81ff>9</span>)<span style=color:#f92672>.</span>reshape(<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>131</span>]:
</span></span><span style=display:flex><span>array([[<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>],
</span></span><span style=display:flex><span>       [<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>],
</span></span><span style=display:flex><span>       [<span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>8</span>]])
</span></span></code></pre></div><p>We can summarize the values of each column,</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>132</span>]: np<span style=color:#f92672>.</span>arange(<span style=color:#ae81ff>9</span>)<span style=color:#f92672>.</span>reshape(<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>3</span>)<span style=color:#f92672>.</span>min(axis<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>132</span>]: array([<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>133</span>]: np<span style=color:#f92672>.</span>arange(<span style=color:#ae81ff>9</span>)<span style=color:#f92672>.</span>reshape(<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>3</span>)<span style=color:#f92672>.</span>max(axis<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>133</span>]: array([<span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>8</span>])
</span></span></code></pre></div><p>or summarize the values in each row:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>134</span>]: np<span style=color:#f92672>.</span>arange(<span style=color:#ae81ff>9</span>)<span style=color:#f92672>.</span>reshape(<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>3</span>)<span style=color:#f92672>.</span>min(axis<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>134</span>]: array([<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>6</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>135</span>]: np<span style=color:#f92672>.</span>arange(<span style=color:#ae81ff>9</span>)<span style=color:#f92672>.</span>reshape(<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>3</span>)<span style=color:#f92672>.</span>max(axis<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>135</span>]: array([<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>8</span>])
</span></span></code></pre></div><p>Note that <em>axis</em> here means <em>dimension to be collapsed</em>. So axis 0 means we collapse the rows into one array by aplying the aggregation function by column.</p><h2 id=missing-data>Missing Data</h2><p>Missing array elements represented as <code>np.nan</code> values.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>86</span>]: xs <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>array([<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, np<span style=color:#f92672>.</span>nan])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>87</span>]: np<span style=color:#f92672>.</span>mean(xs)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>87</span>]: nan
</span></span></code></pre></div><p>Ways to handle missing values:</p><ul><li>Manually masking with <code>np.isnan</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>90</span>]: np<span style=color:#f92672>.</span>mean(xs[[<span style=color:#f92672>not</span> np<span style=color:#f92672>.</span>isnan(x) <span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> xs]])
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>90</span>]: <span style=color:#ae81ff>3.0</span>
</span></span></code></pre></div><ul><li>Masking using the <a href=https://docs.scipy.org/doc/numpy-1.13.0/reference/maskedarray.generic.html><code>numpy.ma</code></a> module.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>92</span>]: np<span style=color:#f92672>.</span>ma<span style=color:#f92672>.</span>masked_invalid(xs)<span style=color:#f92672>.</span>mean()
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>92</span>]: <span style=color:#ae81ff>3.0</span>
</span></span></code></pre></div><ul><li>Using NaN-ignoring aggregates:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>93</span>]: np<span style=color:#f92672>.</span>nanmean(xs)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>93</span>]: <span style=color:#ae81ff>3.0</span>
</span></span></code></pre></div><p>Pandas gives you a few more options, but these cover many cases that come up in practice.</p><h2 id=npwhere><code>np.where</code></h2><p><code>np.where(cond, true_result, false_result)</code> is a vectorized version of Python&rsquo;s ternary if-else expression.</p><p>Here, we double all the even numbers:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span>In [<span style=color:#ae81ff>12</span>]: a <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>array([[<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>], [<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>6</span>], [<span style=color:#ae81ff>7</span>,<span style=color:#ae81ff>8</span>,<span style=color:#ae81ff>9</span>]])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>14</span>]: a
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>14</span>]:
</span></span><span style=display:flex><span>array([[<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>],
</span></span><span style=display:flex><span>       [<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>6</span>],
</span></span><span style=display:flex><span>       [<span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>9</span>]])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>15</span>]: np<span style=color:#f92672>.</span>where((a <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>, a <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>, a)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>15</span>]:
</span></span><span style=display:flex><span>array([[ <span style=color:#ae81ff>1</span>,  <span style=color:#ae81ff>4</span>,  <span style=color:#ae81ff>3</span>],
</span></span><span style=display:flex><span>       [ <span style=color:#ae81ff>8</span>,  <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>12</span>],
</span></span><span style=display:flex><span>       [ <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>16</span>,  <span style=color:#ae81ff>9</span>]])
</span></span></code></pre></div><p>Exercise: do that operation above using basic Python on a list of lists.</p><h2 id=closing-thoughts>Closing Thoughts</h2><p>Key ideas of NumPy:</p><ul><li>In-memory arrays of elements with the same data type</li><li>Static typing of arrays together with vectorized operations of universal functions provide dramatic speed up over equivalent Python code</li><li>Ufuncs combined with with boolean masks makes it easy to partition data</li><li>Aggregate functions make it easy to summarize data</li></ul><p>NumPy is the foundation of the SciPy stack. Even when we don&rsquo;t use it directly (which we often will), it&rsquo;s there underneath the hood.</p></main><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js integrity=sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script>
<script src=../js/bootstrap.min.js></script></body></html>